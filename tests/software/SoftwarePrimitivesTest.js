"use strict";
var Vector3D_1 = require("awayjs-core/lib/geom/Vector3D");
var RequestAnimationFrame_1 = require("awayjs-core/lib/utils/RequestAnimationFrame");
var Debug_1 = require("awayjs-core/lib/utils/Debug");
var View_1 = require("awayjs-display/lib/View");
var DirectionalLight_1 = require("awayjs-display/lib/display/DirectionalLight");
var DefaultMaterialManager_1 = require("awayjs-display/lib/managers/DefaultMaterialManager");
var StaticLightPicker_1 = require("awayjs-display/lib/materials/lightpickers/StaticLightPicker");
var PrimitiveCapsulePrefab_1 = require("awayjs-display/lib/prefabs/PrimitiveCapsulePrefab");
var PrimitiveConePrefab_1 = require("awayjs-display/lib/prefabs/PrimitiveConePrefab");
var PrimitiveCubePrefab_1 = require("awayjs-display/lib/prefabs/PrimitiveCubePrefab");
var PrimitiveCylinderPrefab_1 = require("awayjs-display/lib/prefabs/PrimitiveCylinderPrefab");
var PrimitivePlanePrefab_1 = require("awayjs-display/lib/prefabs/PrimitivePlanePrefab");
var PrimitiveSpherePrefab_1 = require("awayjs-display/lib/prefabs/PrimitiveSpherePrefab");
var PrimitiveTorusPrefab_1 = require("awayjs-display/lib/prefabs/PrimitiveTorusPrefab");
var DefaultRenderer_1 = require("awayjs-renderergl/lib/DefaultRenderer");
var MethodMaterial_1 = require("awayjs-methodmaterials/lib/MethodMaterial");
var SoftwarePrimitivesTest = (function () {
    function SoftwarePrimitivesTest() {
        var _this = this;
        this.sprites = new Array();
        this.radius = 400;
        Debug_1.default.LOG_PI_ERRORS = false;
        Debug_1.default.THROW_ERRORS = false;
        var defaultRenderer = new DefaultRenderer_1.default(null, false, "baseline", "software");
        defaultRenderer.antiAlias = 1;
        this.view = new View_1.default(defaultRenderer);
        this.raf = new RequestAnimationFrame_1.default(this.render, this);
        this.light = new DirectionalLight_1.default();
        this.light.color = 0xFFFFFF;
        this.light.direction = new Vector3D_1.default(1, 1, 0);
        this.light.ambient = 0;
        this.light.ambientColor = 0xFFFFFF;
        this.light.diffuse = 1;
        this.light.specular = 1;
        this.lightB = new DirectionalLight_1.default();
        this.lightB.color = 0xFF0000;
        this.lightB.direction = new Vector3D_1.default(-1, 0, 1);
        this.lightB.ambient = 0;
        this.lightB.ambientColor = 0xFFFFFF;
        this.lightB.diffuse = 1;
        this.lightB.specular = 1;
        this.staticLightPicker = new StaticLightPicker_1.default([this.light, this.lightB]);
        this.view.scene.addChild(this.light);
        this.view.scene.addChild(this.lightB);
        this.view.backgroundColor = 0x000000;
        window.onresize = function (event) { return _this.onResize(event); };
        this.initSpritees();
        this.raf.start();
        this.onResize();
    }
    SoftwarePrimitivesTest.prototype.initSpritees = function () {
        var primitives = new Array();
        var material = new MethodMaterial_1.default(DefaultMaterialManager_1.default.getDefaultImage2D());
        material.lightPicker = this.staticLightPicker;
        primitives.push(new PrimitiveTorusPrefab_1.default());
        primitives.push(new PrimitiveSpherePrefab_1.default());
        primitives.push(new PrimitiveCapsulePrefab_1.default());
        primitives.push(new PrimitiveCylinderPrefab_1.default());
        primitives.push(new PrimitivePlanePrefab_1.default());
        primitives.push(new PrimitiveConePrefab_1.default());
        primitives.push(new PrimitiveCubePrefab_1.default());
        var sprite;
        for (var c = 0; c < primitives.length; c++) {
            primitives[c].material = material;
            var t = Math.PI * 2 * c / primitives.length;
            sprite = primitives[c].getNewObject();
            sprite.x = Math.cos(t) * this.radius;
            sprite.y = Math.sin(t) * this.radius;
            sprite.z = 0;
            sprite.transform.scaleTo(2, 2, 2);
            this.view.scene.addChild(sprite);
            this.sprites.push(sprite);
        }
    };
    SoftwarePrimitivesTest.prototype.render = function () {
        //if (this.sprites)
        //    for (var c:number = 0; c < this.sprites.length; c++)
        //        this.sprites[c].rotationY += 1;
        this.view.render();
    };
    SoftwarePrimitivesTest.prototype.onResize = function (event) {
        if (event === void 0) { event = null; }
        this.view.y = 0;
        this.view.x = 0;
        this.view.width = window.innerWidth;
        this.view.height = window.innerHeight;
    };
    return SoftwarePrimitivesTest;
}());

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNvZnR3YXJlL1NvZnR3YXJlUHJpbWl0aXZlc1Rlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBLHlCQUEwQiwrQkFBK0IsQ0FBQyxDQUFBO0FBQzFELHNDQUFtQyw2Q0FBNkMsQ0FBQyxDQUFBO0FBQ2pGLHNCQUF1Qiw2QkFBNkIsQ0FBQyxDQUFBO0FBRXJELHFCQUF1Qix5QkFBeUIsQ0FBQyxDQUFBO0FBRWpELGlDQUFnQyw2Q0FBNkMsQ0FBQyxDQUFBO0FBQzlFLHVDQUFvQyxvREFBb0QsQ0FBQyxDQUFBO0FBQ3pGLGtDQUFnQyw2REFBNkQsQ0FBQyxDQUFBO0FBRTlGLHVDQUFvQyxtREFBbUQsQ0FBQyxDQUFBO0FBQ3hGLG9DQUFrQyxnREFBZ0QsQ0FBQyxDQUFBO0FBQ25GLG9DQUFrQyxnREFBZ0QsQ0FBQyxDQUFBO0FBQ25GLHdDQUFxQyxvREFBb0QsQ0FBQyxDQUFBO0FBQzFGLHFDQUFtQyxpREFBaUQsQ0FBQyxDQUFBO0FBQ3JGLHNDQUFtQyxrREFBa0QsQ0FBQyxDQUFBO0FBQ3RGLHFDQUFtQyxpREFBaUQsQ0FBQyxDQUFBO0FBRXJGLGdDQUErQix1Q0FBdUMsQ0FBQyxDQUFBO0FBRXZFLCtCQUE4QiwyQ0FBMkMsQ0FBQyxDQUFBO0FBRTFFO0lBV0k7UUFYSixpQkEwR0M7UUFyR1csWUFBTyxHQUFpQixJQUFJLEtBQUssRUFBVSxDQUFDO1FBSTVDLFdBQU0sR0FBVSxHQUFHLENBQUM7UUFLeEIsZUFBSyxDQUFDLGFBQWEsR0FBTSxLQUFLLENBQUM7UUFDL0IsZUFBSyxDQUFDLFlBQVksR0FBTyxLQUFLLENBQUM7UUFFL0IsSUFBSSxlQUFlLEdBQW1CLElBQUkseUJBQWUsQ0FBQyxJQUFJLEVBQUUsS0FBSyxFQUFFLFVBQVUsRUFBRSxVQUFVLENBQUMsQ0FBQztRQUMvRixlQUFlLENBQUMsU0FBUyxHQUFHLENBQUMsQ0FBQztRQUU5QixJQUFJLENBQUMsSUFBSSxHQUFHLElBQUksY0FBSSxDQUFDLGVBQWUsQ0FBQyxDQUFDO1FB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QixxQkFBb0IsR0FBcEIsWUFBb0I7UUFFaEMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ2hCLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUVoQixJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssR0FBRyxNQUFNLENBQUMsVUFBVSxDQUFDO1FBQ3BDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQyxXQUFXLENBQUM7SUFDMUMsQ0FBQztJQUNMLDZCQUFDO0FBQUQsQ0ExR0EsQUEwR0MsSUFBQSIsImZpbGUiOiJzb2Z0d2FyZS9Tb2Z0d2FyZVByaW1pdGl2ZXNUZXN0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFZlY3RvcjNEXHRcdFx0XHRcdFx0ZnJvbSBcImF3YXlqcy1jb3JlL2xpYi9nZW9tL1ZlY3RvcjNEXCI7XG5pbXBvcnQgUmVxdWVzdEFuaW1hdGlvbkZyYW1lXHRcdGZyb20gXCJhd2F5anMtY29yZS9saWIvdXRpbHMvUmVxdWVzdEFuaW1hdGlvbkZyYW1lXCI7XG5pbXBvcnQgRGVidWdcdFx0XHRcdFx0XHRmcm9tIFwiYXdheWpzLWNvcmUvbGliL3V0aWxzL0RlYnVnXCI7XG5cbmltcG9ydCBWaWV3XHRcdFx0XHRcdFx0XHRmcm9tIFwiYXdheWpzLWRpc3BsYXkvbGliL1ZpZXdcIjtcbmltcG9ydCBTcHJpdGVcdFx0XHRcdFx0XHRmcm9tIFwiYXdheWpzLWRpc3BsYXkvbGliL2Rpc3BsYXkvU3ByaXRlXCI7XG5pbXBvcnQgRGlyZWN0aW9uYWxMaWdodFx0XHRcdFx0ZnJvbSBcImF3YXlqcy1kaXNwbGF5L2xpYi9kaXNwbGF5L0RpcmVjdGlvbmFsTGlnaHRcIjtcbmltcG9ydCBEZWZhdWx0TWF0ZXJpYWxNYW5hZ2VyXHRcdGZyb20gXCJhd2F5anMtZGlzcGxheS9saWIvbWFuYWdlcnMvRGVmYXVsdE1hdGVyaWFsTWFuYWdlclwiO1xuaW1wb3J0IFN0YXRpY0xpZ2h0UGlja2VyXHRcdFx0ZnJvbSBcImF3YXlqcy1kaXNwbGF5L2xpYi9tYXRlcmlhbHMvbGlnaHRwaWNrZXJzL1N0YXRpY0xpZ2h0UGlja2VyXCI7XG5pbXBvcnQgUHJpbWl0aXZlUHJlZmFiQmFzZVx0XHRcdGZyb20gXCJhd2F5anMtZGlzcGxheS9saWIvcHJlZmFicy9QcmltaXRpdmVQcmVmYWJCYXNlXCI7XG5pbXBvcnQgUHJpbWl0aXZlQ2Fwc3VsZVByZWZhYlx0XHRmcm9tIFwiYXdheWpzLWRpc3BsYXkvbGliL3ByZWZhYnMvUHJpbWl0aXZlQ2Fwc3VsZVByZWZhYlwiO1xuaW1wb3J0IFByaW1pdGl2ZUNvbmVQcmVmYWJcdFx0XHRmcm9tIFwiYXdheWpzLWRpc3BsYXkvbGliL3ByZWZhYnMvUHJpbWl0aXZlQ29uZVByZWZhYlwiO1xuaW1wb3J0IFByaW1pdGl2ZUN1YmVQcmVmYWJcdFx0XHRmcm9tIFwiYXdheWpzLWRpc3BsYXkvbGliL3ByZWZhYnMvUHJpbWl0aXZlQ3ViZVByZWZhYlwiO1xuaW1wb3J0IFByaW1pdGl2ZUN5bGluZGVyUHJlZmFiXHRcdGZyb20gXCJhd2F5anMtZGlzcGxheS9saWIvcHJlZmFicy9QcmltaXRpdmVDeWxpbmRlclByZWZhYlwiO1xuaW1wb3J0IFByaW1pdGl2ZVBsYW5lUHJlZmFiXHRcdFx0ZnJvbSBcImF3YXlqcy1kaXNwbGF5L2xpYi9wcmVmYWJzL1ByaW1pdGl2ZVBsYW5lUHJlZmFiXCI7XG5pbXBvcnQgUHJpbWl0aXZlU3BoZXJlUHJlZmFiXHRcdGZyb20gXCJhd2F5anMtZGlzcGxheS9saWIvcHJlZmFicy9QcmltaXRpdmVTcGhlcmVQcmVmYWJcIjtcbmltcG9ydCBQcmltaXRpdmVUb3J1c1ByZWZhYlx0XHRcdGZyb20gXCJhd2F5anMtZGlzcGxheS9saWIvcHJlZmFicy9QcmltaXRpdmVUb3J1c1ByZWZhYlwiO1xuXG5pbXBvcnQgRGVmYXVsdFJlbmRlcmVyXHRcdFx0XHRmcm9tIFwiYXdheWpzLXJlbmRlcmVyZ2wvbGliL0RlZmF1bHRSZW5kZXJlclwiO1xuXG5pbXBvcnQgTWV0aG9kTWF0ZXJpYWxcdFx0XHRcdGZyb20gXCJhd2F5anMtbWV0aG9kbWF0ZXJpYWxzL2xpYi9NZXRob2RNYXRlcmlhbFwiO1xuXG5jbGFzcyBTb2Z0d2FyZVByaW1pdGl2ZXNUZXN0XG57XG5cbiAgICBwcml2YXRlIHZpZXc6VmlldztcbiAgICBwcml2YXRlIHJhZjpSZXF1ZXN0QW5pbWF0aW9uRnJhbWU7XG4gICAgcHJpdmF0ZSBzcHJpdGVzOkFycmF5PFNwcml0ZT4gPSBuZXcgQXJyYXk8U3ByaXRlPigpO1xuICAgIHByaXZhdGUgbGlnaHQ6RGlyZWN0aW9uYWxMaWdodDtcbiAgICBwcml2YXRlIGxpZ2h0QjpEaXJlY3Rpb25hbExpZ2h0O1xuICAgIHByaXZhdGUgc3RhdGljTGlnaHRQaWNrZXI6U3RhdGljTGlnaHRQaWNrZXI7XG4gICAgcHJpdmF0ZSByYWRpdXM6bnVtYmVyID0gNDAwO1xuXG4gICAgY29uc3RydWN0b3IoKVxuICAgIHtcblxuICAgICAgICBEZWJ1Zy5MT0dfUElfRVJST1JTICAgID0gZmFsc2U7XG4gICAgICAgIERlYnVnLlRIUk9XX0VSUk9SUyAgICAgPSBmYWxzZTtcblxuICAgICAgICB2YXIgZGVmYXVsdFJlbmRlcmVyOkRlZmF1bHRSZW5kZXJlciA9IG5ldyBEZWZhdWx0UmVuZGVyZXIobnVsbCwgZmFsc2UsIFwiYmFzZWxpbmVcIiwgXCJzb2Z0d2FyZVwiKTtcbiAgICAgICAgZGVmYXVsdFJlbmRlcmVyLmFudGlBbGlhcyA9IDE7XG5cbiAgICAgICAgdGhpcy52aWV3ID0gbmV3IFZpZXcoZGVmYXVsdFJlbmRlcmVyKTtcblxuICAgICAgICB0aGlzLnJhZiA9IG5ldyBSZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5yZW5kZXIsIHRoaXMpO1xuXG4gICAgICAgIHRoaXMubGlnaHQgPSBuZXcgRGlyZWN0aW9uYWxMaWdodCgpO1xuICAgICAgICB0aGlzLmxpZ2h0LmNvbG9yID0gMHhGRkZGRkY7XG4gICAgICAgIHRoaXMubGlnaHQuZGlyZWN0aW9uID0gbmV3IFZlY3RvcjNEKDEsIDEsIDApO1xuICAgICAgICB0aGlzLmxpZ2h0LmFtYmllbnQgPSAwO1xuICAgICAgICB0aGlzLmxpZ2h0LmFtYmllbnRDb2xvciA9IDB4RkZGRkZGO1xuICAgICAgICB0aGlzLmxpZ2h0LmRpZmZ1c2UgPSAxO1xuICAgICAgICB0aGlzLmxpZ2h0LnNwZWN1bGFyID0gMTtcblxuICAgICAgICB0aGlzLmxpZ2h0QiA9IG5ldyBEaXJlY3Rpb25hbExpZ2h0KCk7XG4gICAgICAgIHRoaXMubGlnaHRCLmNvbG9yID0gMHhGRjAwMDA7XG4gICAgICAgIHRoaXMubGlnaHRCLmRpcmVjdGlvbiA9IG5ldyBWZWN0b3IzRCggLTEgLCAwICwxICk7XG4gICAgICAgIHRoaXMubGlnaHRCLmFtYmllbnQgPSAwO1xuICAgICAgICB0aGlzLmxpZ2h0Qi5hbWJpZW50Q29sb3IgPSAweEZGRkZGRjtcbiAgICAgICAgdGhpcy5saWdodEIuZGlmZnVzZSA9IDE7XG4gICAgICAgIHRoaXMubGlnaHRCLnNwZWN1bGFyID0gMTtcblxuICAgICAgICB0aGlzLnN0YXRpY0xpZ2h0UGlja2VyID0gbmV3IFN0YXRpY0xpZ2h0UGlja2VyKFt0aGlzLmxpZ2h0ICwgdGhpcy5saWdodEJdKTtcblxuICAgICAgICB0aGlzLnZpZXcuc2NlbmUuYWRkQ2hpbGQodGhpcy5saWdodCk7XG4gICAgICAgIHRoaXMudmlldy5zY2VuZS5hZGRDaGlsZCh0aGlzLmxpZ2h0Qik7XG5cbiAgICAgICAgdGhpcy52aWV3LmJhY2tncm91bmRDb2xvciA9IDB4MDAwMDAwO1xuXG4gICAgICAgIHdpbmRvdy5vbnJlc2l6ZSA9IChldmVudDpVSUV2ZW50KSA9PiB0aGlzLm9uUmVzaXplKGV2ZW50KTtcblxuICAgICAgICB0aGlzLmluaXRTcHJpdGVlcygpO1xuICAgICAgICB0aGlzLnJhZi5zdGFydCgpO1xuICAgICAgICB0aGlzLm9uUmVzaXplKCk7XG4gICAgfVxuXG4gICAgcHJpdmF0ZSBpbml0U3ByaXRlZXMoKTp2b2lkXG4gICAge1xuXG4gICAgICAgIHZhciBwcmltaXRpdmVzOkFycmF5PFByaW1pdGl2ZVByZWZhYkJhc2U+ID0gbmV3IEFycmF5PFByaW1pdGl2ZVByZWZhYkJhc2U+KCk7XG4gICAgICAgIHZhciBtYXRlcmlhbDpNZXRob2RNYXRlcmlhbCA9IG5ldyBNZXRob2RNYXRlcmlhbChEZWZhdWx0TWF0ZXJpYWxNYW5hZ2VyLmdldERlZmF1bHRJbWFnZTJEKCkpO1xuICAgICAgICBtYXRlcmlhbC5saWdodFBpY2tlciA9IHRoaXMuc3RhdGljTGlnaHRQaWNrZXI7XG5cbiAgICAgICAgcHJpbWl0aXZlcy5wdXNoKG5ldyBQcmltaXRpdmVUb3J1c1ByZWZhYigpKTtcbiAgICAgICAgcHJpbWl0aXZlcy5wdXNoKG5ldyBQcmltaXRpdmVTcGhlcmVQcmVmYWIoKSk7XG4gICAgICAgIHByaW1pdGl2ZXMucHVzaChuZXcgUHJpbWl0aXZlQ2Fwc3VsZVByZWZhYigpKTtcbiAgICAgICAgcHJpbWl0aXZlcy5wdXNoKG5ldyBQcmltaXRpdmVDeWxpbmRlclByZWZhYigpKTtcbiAgICAgICAgcHJpbWl0aXZlcy5wdXNoKG5ldyBQcmltaXRpdmVQbGFuZVByZWZhYigpKTtcbiAgICAgICAgcHJpbWl0aXZlcy5wdXNoKG5ldyBQcmltaXRpdmVDb25lUHJlZmFiKCkpO1xuICAgICAgICBwcmltaXRpdmVzLnB1c2gobmV3IFByaW1pdGl2ZUN1YmVQcmVmYWIoKSk7XG5cbiAgICAgICAgdmFyIHNwcml0ZTpTcHJpdGU7XG5cbiAgICAgICAgZm9yICh2YXIgYzpudW1iZXIgPSAwOyBjIDwgcHJpbWl0aXZlcy5sZW5ndGg7IGMgKyspIHtcbiAgICAgICAgICAgIHByaW1pdGl2ZXNbY10ubWF0ZXJpYWwgPSBtYXRlcmlhbDtcblxuICAgICAgICAgICAgdmFyIHQ6bnVtYmVyID0gTWF0aC5QSSoyKmMvcHJpbWl0aXZlcy5sZW5ndGg7XG5cbiAgICAgICAgICAgIHNwcml0ZSA9IDxTcHJpdGU+IHByaW1pdGl2ZXNbY10uZ2V0TmV3T2JqZWN0KCk7XG4gICAgICAgICAgICBzcHJpdGUueCA9IE1hdGguY29zKHQpKnRoaXMucmFkaXVzO1xuICAgICAgICAgICAgc3ByaXRlLnkgPSBNYXRoLnNpbih0KSp0aGlzLnJhZGl1cztcbiAgICAgICAgICAgIHNwcml0ZS56ID0gMDtcbiAgICAgICAgICAgIHNwcml0ZS50cmFuc2Zvcm0uc2NhbGVUbygyLCAyLCAyKTtcblxuICAgICAgICAgICAgdGhpcy52aWV3LnNjZW5lLmFkZENoaWxkKHNwcml0ZSk7XG4gICAgICAgICAgICB0aGlzLnNwcml0ZXMucHVzaChzcHJpdGUpO1xuICAgICAgICB9XG5cblxuICAgIH1cblxuICAgIHByaXZhdGUgcmVuZGVyKClcbiAgICB7XG4gICAgICAgIC8vaWYgKHRoaXMuc3ByaXRlcylcbiAgICAgICAgLy8gICAgZm9yICh2YXIgYzpudW1iZXIgPSAwOyBjIDwgdGhpcy5zcHJpdGVzLmxlbmd0aDsgYysrKVxuICAgICAgICAvLyAgICAgICAgdGhpcy5zcHJpdGVzW2NdLnJvdGF0aW9uWSArPSAxO1xuXG4gICAgICAgIHRoaXMudmlldy5yZW5kZXIoKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgb25SZXNpemUoZXZlbnQ6VUlFdmVudCA9IG51bGwpXG4gICAge1xuICAgICAgICB0aGlzLnZpZXcueSA9IDA7XG4gICAgICAgIHRoaXMudmlldy54ID0gMDtcblxuICAgICAgICB0aGlzLnZpZXcud2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgICAgdGhpcy52aWV3LmhlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICB9XG59Il0sInNvdXJjZVJvb3QiOiIuL3Rlc3RzIn0=
