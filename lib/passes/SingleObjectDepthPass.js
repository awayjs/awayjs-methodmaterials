var __extends = this.__extends || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    __.prototype = b.prototype;
    d.prototype = new __();
};
var Matrix3D = require("awayjs-core/lib/geom/Matrix3D");
var RenderTexture = require("awayjs-core/lib/textures/RenderTexture");
var TriangleSubGeometry = require("awayjs-display/lib/base/TriangleSubGeometry");
var ContextGLProgramType = require("awayjs-stagegl/lib/base/ContextGLProgramType");
var RenderPassBase = require("awayjs-renderergl/lib/passes/RenderPassBase");
/**
 * The SingleObjectDepthPass provides a material pass that renders a single object to a depth map from the point
 * of view from a light.
 */
var SingleObjectDepthPass = (function (_super) {
    __extends(SingleObjectDepthPass, _super);
    /**
     * Creates a new SingleObjectDepthPass object.
     */
    function SingleObjectDepthPass(renderObject, renderObjectOwner, renderableClass, stage) {
        _super.call(this, renderObject, renderObjectOwner, renderableClass, stage);
        this._textureSize = 512;
        this._polyOffset = Array(15, 0, 0, 0);
        this._projectionTexturesInvalid = true;
        //this._pNumUsedStreams = 2;
        //this._pNumUsedVertexConstants = 7;
        //this._enc = Array<number>(1.0, 255.0, 65025.0, 16581375.0, 1.0/255.0, 1.0/255.0, 1.0/255.0, 0.0);
        //
        //this._pAnimatableAttributes = Array<string>("va0", "va1");
        //this._pAnimationTargetRegisters = Array<string>("vt0", "vt1");
    }
    Object.defineProperty(SingleObjectDepthPass.prototype, "textureSize", {
        /**
         * The size of the depth map texture to render to.
         */
        get: function () {
            return this._textureSize;
        },
        set: function (value) {
            this._textureSize = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(SingleObjectDepthPass.prototype, "polyOffset", {
        /**
         * The amount by which the rendered object will be inflated, to prevent depth map rounding errors.
         */
        get: function () {
            return this._polyOffset[0];
        },
        set: function (value) {
            this._polyOffset[0] = value;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @inheritDoc
     */
    SingleObjectDepthPass.prototype.dispose = function () {
        if (this._textures) {
            for (var key in this._textures) {
                var texture = this._textures[key];
                texture.dispose();
            }
            this._textures = null;
        }
    };
    /**
     * Updates the projection textures used to contain the depth renders.
     */
    SingleObjectDepthPass.prototype.updateProjectionTextures = function () {
        if (this._textures) {
            for (var key in this._textures) {
                var texture = this._textures[key];
                texture.dispose();
            }
        }
        this._textures = new Object();
        this._projections = new Object();
        this._projectionTexturesInvalid = false;
    };
    /**
     * @inheritDoc
     */
    SingleObjectDepthPass.prototype._iGetVertexCode = function () {
        var code;
        // offset
        code = "mul vt7, vt1, vc4.x	\n" + "add vt7, vt7, vt0\n" + "mov vt7.w, vt0.w\n";
        // project
        code += "m44 vt2, vt7, vc0\n" + "mov op, vt2\n";
        // perspective divide
        code += "div v0, vt2, vt2.w\n";
        return code;
    };
    /**
     * @inheritDoc
     */
    SingleObjectDepthPass.prototype._iGetFragmentCode = function (shaderObject, registerCache, sharedRegisters) {
        var code = "";
        // encode float -> rgba
        code += "mul ft0, fc0, v0.z\n" + "frc ft0, ft0\n" + "mul ft1, ft0.yzww, fc1\n" + "sub ft0, ft0, ft1\n" + "mov oc, ft0\n";
        return code;
    };
    /**
     * Gets the depth maps rendered for this object from all lights.
     * @param renderable The renderable for which to retrieve the depth maps.
     * @param stage3DProxy The Stage3DProxy object currently used for rendering.
     * @return A list of depth map textures for all supported lights.
     */
    SingleObjectDepthPass.prototype._iGetDepthMap = function (renderable) {
        return this._textures[renderable.renderableOwner.id];
    };
    /**
     * Retrieves the depth map projection maps for all lights.
     * @param renderable The renderable for which to retrieve the projection maps.
     * @return A list of projection maps for all supported lights.
     */
    SingleObjectDepthPass.prototype._iGetProjection = function (renderable) {
        return this._projections[renderable.renderableOwner.id];
    };
    /**
     * @inheritDoc
     */
    SingleObjectDepthPass.prototype._iRender = function (renderable, camera, viewProjection) {
        var matrix;
        var context = this._stage.context;
        var len /*uint*/;
        var light;
        var lights = this._renderObjectOwner.lightPicker.allPickedLights;
        var rId = renderable.renderableOwner.id;
        if (!this._textures[rId])
            this._textures[rId] = new RenderTexture(this._textureSize, this._textureSize);
        if (!this._projections[rId])
            this._projections[rId] = new Matrix3D();
        len = lights.length;
        // local position = enough
        light = lights[0];
        matrix = light.iGetObjectProjectionMatrix(renderable.sourceEntity, camera, this._projections[rId]);
        this._stage.setRenderTarget(this._textures[rId], true);
        context.clear(1.0, 1.0, 1.0);
        context.setProgramConstantsFromMatrix(ContextGLProgramType.VERTEX, 0, matrix, true);
        context.setProgramConstantsFromArray(ContextGLProgramType.FRAGMENT, 0, this._enc, 2);
        this._stage.activateBuffer(0, renderable.getVertexData(TriangleSubGeometry.POSITION_DATA), renderable.getVertexOffset(TriangleSubGeometry.POSITION_DATA), TriangleSubGeometry.POSITION_FORMAT);
        this._stage.activateBuffer(1, renderable.getVertexData(TriangleSubGeometry.NORMAL_DATA), renderable.getVertexOffset(TriangleSubGeometry.NORMAL_DATA), TriangleSubGeometry.NORMAL_FORMAT);
        context.drawTriangles(this._stage.getIndexBuffer(renderable.getIndexData()), 0, renderable.numTriangles);
    };
    /**
     * @inheritDoc
     */
    SingleObjectDepthPass.prototype._iActivate = function (camera) {
        if (this._projectionTexturesInvalid)
            this.updateProjectionTextures();
        // never scale
        _super.prototype._iActivate.call(this, camera);
        this._stage.context.setProgramConstantsFromArray(ContextGLProgramType.VERTEX, 4, this._polyOffset, 1);
    };
    return SingleObjectDepthPass;
})(RenderPassBase);
module.exports = SingleObjectDepthPass;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF3YXlqcy1tZXRob2RtYXRlcmlhbHMvbGliL3Bhc3Nlcy9TaW5nbGVPYmplY3REZXB0aFBhc3MudHMiXSwibmFtZXMiOlsiU2luZ2xlT2JqZWN0RGVwdGhQYXNzIiwiU2luZ2xlT2JqZWN0RGVwdGhQYXNzLmNvbnN0cnVjdG9yIiwiU2luZ2xlT2JqZWN0RGVwdGhQYXNzLnRleHR1cmVTaXplIiwiU2luZ2xlT2JqZWN0RGVwdGhQYXNzLnBvbHlPZmZzZXQiLCJTaW5nbGVPYmplY3REZXB0aFBhc3MuZGlzcG9zZSIsIlNpbmdsZU9iamVjdERlcHRoUGFzcy51cGRhdGVQcm9qZWN0aW9uVGV4dHVyZXMiLCJTaW5nbGVPYmplY3REZXB0aFBhc3MuX2lHZXRWZXJ0ZXhDb2RlIiwiU2luZ2xlT2JqZWN0RGVwdGhQYXNzLl9pR2V0RnJhZ21lbnRDb2RlIiwiU2luZ2xlT2JqZWN0RGVwdGhQYXNzLl9pR2V0RGVwdGhNYXAiLCJTaW5nbGVPYmplY3REZXB0aFBhc3MuX2lHZXRQcm9qZWN0aW9uIiwiU2luZ2xlT2JqZWN0RGVwdGhQYXNzLl9pUmVuZGVyIiwiU2luZ2xlT2JqZWN0RGVwdGhQYXNzLl9pQWN0aXZhdGUiXSwibWFwcGluZ3MiOiI7Ozs7OztBQUFBLElBQU8sUUFBUSxXQUFpQiwrQkFBK0IsQ0FBQyxDQUFDO0FBQ2pFLElBQU8sYUFBYSxXQUFlLHdDQUF3QyxDQUFDLENBQUM7QUFHN0UsSUFBTyxtQkFBbUIsV0FBYyw2Q0FBNkMsQ0FBQyxDQUFDO0FBS3ZGLElBQU8sb0JBQW9CLFdBQWMsOENBQThDLENBQUMsQ0FBQztBQVd6RixJQUFPLGNBQWMsV0FBZSw2Q0FBNkMsQ0FBQyxDQUFDO0FBRW5GLEFBSUE7OztHQURHO0lBQ0cscUJBQXFCO0lBQVNBLFVBQTlCQSxxQkFBcUJBLFVBQXVCQTtJQW1DakRBOztPQUVHQTtJQUNIQSxTQXRDS0EscUJBQXFCQSxDQXNDZEEsWUFBNkJBLEVBQUVBLGlCQUFvQ0EsRUFBRUEsZUFBZ0NBLEVBQUVBLEtBQVdBO1FBRTdI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QUFDQSxlQUFlQSxDQUFDQTtRQUNsRkEsSUFBSUEsR0FBR0EsR0FBVUEsVUFBVUEsQ0FBQ0EsZUFBZUEsQ0FBQ0EsRUFBRUEsQ0FBQ0E7UUFFL0NBLEVBQUVBLENBQUNBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLFNBQVNBLENBQUNBLEdBQUdBLENBQUNBLENBQUNBO1lBQ3hCQSxJQUFJQSxDQUFDQSxTQUFTQSxDQUFDQSxHQUFHQSxDQUFDQSxHQUFHQSxJQUFJQSxhQUFhQSxDQUFDQSxJQUFJQSxDQUFDQSxZQUFZQSxFQUFFQSxJQUFJQSxDQUFDQSxZQUFZQSxDQUFDQSxDQUFDQTtRQUUvRUEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsWUFBWUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0E7WUFDM0JBLElBQUlBLENBQUNBLFlBQVlBLENBQUNBLEdBQUdBLENBQUNBLEdBQUdBLElBQUlBLFFBQVFBLEVBQUVBLENBQUNBO1FBRXpDQSxHQUFHQSxHQUFHQSxNQUFNQSxDQUFDQSxNQUFNQSxDQUFDQTtRQUVwQkEsQUFDQUEsMEJBRDBCQTtRQUMxQkEsS0FBS0EsR0FBR0EsTUFBTUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFFbEJBLE1BQU1BLEdBQUdBLEtBQUtBLENBQUNBLDBCQUEwQkEsQ0FBQ0EsVUFBVUEsQ0FBQ0EsWUFBWUEsRUFBRUEsTUFBTUEsRUFBRUEsSUFBSUEsQ0FBQ0EsWUFBWUEsQ0FBQ0EsR0FBR0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFFbkdBLElBQUlBLENBQUNBLE1BQU1BLENBQUNBLGVBQWVBLENBQUNBLElBQUlBLENBQUNBLFNBQVNBLENBQUNBLEdBQUdBLENBQUNBLEVBQUVBLElBQUlBLENBQUNBLENBQUNBO1FBQ3ZEQSxPQUFPQSxDQUFDQSxLQUFLQSxDQUFDQSxHQUFHQSxFQUFFQSxHQUFHQSxFQUFFQSxHQUFHQSxDQUFDQSxDQUFDQTtRQUM3QkEsT0FBT0EsQ0FBQ0EsNkJBQTZCQSxDQUFDQSxvQkFBb0JBLENBQUNBLE1BQU1BLEVBQUVBLENBQUNBLEVBQUVBLE1BQU1BLEVBQUVBLElBQUlBLENBQUNBLENBQUNBO1FBQ3BGQSxPQUFPQSxDQUFDQSw0QkFBNEJBLENBQUNBLG9CQUFvQkEsQ0FBQ0EsUUFBUUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsQ0FBQ0EsSUFBSUEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFFckZBLElBQUlBLENBQUNBLE1BQU1BLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLEVBQUVBLFVBQVVBLENBQUNBLGFBQWFBLENBQUNBLG1CQUFtQkEsQ0FBQ0EsYUFBYUEsQ0FBQ0EsRUFBRUEsVUFBVUEsQ0FBQ0EsZUFBZUEsQ0FBQ0EsbUJBQW1CQSxDQUFDQSxhQUFhQSxDQUFDQSxFQUFFQSxtQkFBbUJBLENBQUNBLGVBQWVBLENBQUNBLENBQUNBO1FBQy9MQSxJQUFJQSxDQUFDQSxNQUFNQSxDQUFDQSxjQUFjQSxDQUFDQSxDQUFDQSxFQUFFQSxVQUFVQSxDQUFDQSxhQUFhQSxDQUFDQSxtQkFBbUJBLENBQUNBLFdBQVdBLENBQUNBLEVBQUVBLFVBQVVBLENBQUNBLGVBQWVBLENBQUNBLG1CQUFtQkEsQ0FBQ0EsV0FBV0EsQ0FBQ0EsRUFBRUEsbUJBQW1CQSxDQUFDQSxhQUFhQSxDQUFDQSxDQUFDQTtRQUN6TEEsT0FBT0EsQ0FBQ0EsYUFBYUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsTUFBTUEsQ0FBQ0EsY0FBY0EsQ0FBQ0EsVUFBVUEsQ0FBQ0EsWUFBWUEsRUFBRUEsQ0FBQ0EsRUFBRUEsQ0FBQ0EsRUFBRUEsVUFBVUEsQ0FBQ0EsWUFBWUEsQ0FBQ0EsQ0FBQ0E7SUFDMUdBLENBQUNBO0lBRURWOztPQUVHQTtJQUNJQSwwQ0FBVUEsR0FBakJBLFVBQWtCQSxNQUFhQTtRQUU5QlcsRUFBRUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsMEJBQTBCQSxDQUFDQTtZQUNuQ0EsSUFBSUEsQ0FBQ0Esd0JBQXdCQSxFQUFFQSxDQUFDQTtRQUVqQ0EsQUFDQUEsY0FEY0E7UUFDZEEsZ0JBQUtBLENBQUNBLFVBQVVBLFlBQUNBLE1BQU1BLENBQUNBLENBQUNBO1FBRXpCQSxJQUFJQSxDQUFDQSxNQUFNQSxDQUFDQSxPQUFPQSxDQUFDQSw0QkFBNEJBLENBQUNBLG9CQUFvQkEsQ0FBQ0EsTUFBTUEsRUFBRUEsQ0FBQ0EsRUFBRUEsSUFBSUEsQ0FBQ0EsV0FBV0EsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7SUFDdkdBLENBQUNBO0lBQ0ZYLDRCQUFDQTtBQUFEQSxDQTNMQSxBQTJMQ0EsRUEzTG1DLGNBQWMsRUEyTGpEO0FBRUQsQUFBK0IsaUJBQXRCLHFCQUFxQixDQUFDIiwiZmlsZSI6InBhc3Nlcy9TaW5nbGVPYmplY3REZXB0aFBhc3MuanMiLCJzb3VyY2VSb290IjoiLi4vIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IE1hdHJpeDNEXHRcdFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvZ2VvbS9NYXRyaXgzRFwiKTtcclxuaW1wb3J0IFJlbmRlclRleHR1cmVcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWNvcmUvbGliL3RleHR1cmVzL1JlbmRlclRleHR1cmVcIik7XHJcblxyXG5pbXBvcnQgTGlnaHRCYXNlXHRcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWRpc3BsYXkvbGliL2Jhc2UvTGlnaHRCYXNlXCIpO1xyXG5pbXBvcnQgVHJpYW5nbGVTdWJHZW9tZXRyeVx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWRpc3BsYXkvbGliL2Jhc2UvVHJpYW5nbGVTdWJHZW9tZXRyeVwiKTtcclxuaW1wb3J0IENhbWVyYVx0XHRcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLWRpc3BsYXkvbGliL2VudGl0aWVzL0NhbWVyYVwiKTtcclxuaW1wb3J0IE1hdGVyaWFsQmFzZVx0XHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1kaXNwbGF5L2xpYi9tYXRlcmlhbHMvTWF0ZXJpYWxCYXNlXCIpO1xyXG5pbXBvcnQgSVJlbmRlck9iamVjdE93bmVyXHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtZGlzcGxheS9saWIvYmFzZS9JUmVuZGVyT2JqZWN0T3duZXJcIik7XHJcblxyXG5pbXBvcnQgQ29udGV4dEdMUHJvZ3JhbVR5cGVcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1zdGFnZWdsL2xpYi9iYXNlL0NvbnRleHRHTFByb2dyYW1UeXBlXCIpO1xyXG5pbXBvcnQgSUNvbnRleHRHTFx0XHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1zdGFnZWdsL2xpYi9iYXNlL0lDb250ZXh0R0xcIik7XHJcbmltcG9ydCBTdGFnZVx0XHRcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXN0YWdlZ2wvbGliL2Jhc2UvU3RhZ2VcIik7XHJcblxyXG5pbXBvcnQgUmVuZGVyZXJCYXNlXHRcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXJlbmRlcmVyZ2wvbGliL2Jhc2UvUmVuZGVyZXJCYXNlXCIpO1xyXG5pbXBvcnQgUmVuZGVyT2JqZWN0QmFzZVx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtcmVuZGVyZXJnbC9saWIvY29tcGlsYXRpb24vUmVuZGVyT2JqZWN0QmFzZVwiKTtcclxuaW1wb3J0IFJlbmRlcmFibGVCYXNlXHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9wb29sL1JlbmRlcmFibGVCYXNlXCIpO1xyXG5pbXBvcnQgU2hhZGVyT2JqZWN0QmFzZVx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtcmVuZGVyZXJnbC9saWIvY29tcGlsYXRpb24vU2hhZGVyT2JqZWN0QmFzZVwiKTtcclxuaW1wb3J0IFNoYWRlclJlZ2lzdGVyQ2FjaGVcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9jb21waWxhdGlvbi9TaGFkZXJSZWdpc3RlckNhY2hlXCIpO1xyXG5pbXBvcnQgU2hhZGVyUmVnaXN0ZXJEYXRhXHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtcmVuZGVyZXJnbC9saWIvY29tcGlsYXRpb24vU2hhZGVyUmVnaXN0ZXJEYXRhXCIpO1xyXG5pbXBvcnQgSVJlbmRlcmFibGVDbGFzc1x0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtcmVuZGVyZXJnbC9saWIvcG9vbC9JUmVuZGVyYWJsZUNsYXNzXCIpO1xyXG5pbXBvcnQgUmVuZGVyUGFzc0Jhc2VcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXJlbmRlcmVyZ2wvbGliL3Bhc3Nlcy9SZW5kZXJQYXNzQmFzZVwiKTtcclxuXHJcbi8qKlxyXG4gKiBUaGUgU2luZ2xlT2JqZWN0RGVwdGhQYXNzIHByb3ZpZGVzIGEgbWF0ZXJpYWwgcGFzcyB0aGF0IHJlbmRlcnMgYSBzaW5nbGUgb2JqZWN0IHRvIGEgZGVwdGggbWFwIGZyb20gdGhlIHBvaW50XHJcbiAqIG9mIHZpZXcgZnJvbSBhIGxpZ2h0LlxyXG4gKi9cclxuY2xhc3MgU2luZ2xlT2JqZWN0RGVwdGhQYXNzIGV4dGVuZHMgUmVuZGVyUGFzc0Jhc2Vcclxue1xyXG5cdHByaXZhdGUgX3RleHR1cmVzOk9iamVjdDtcclxuXHRwcml2YXRlIF9wcm9qZWN0aW9uczpPYmplY3Q7XHJcblx0cHJpdmF0ZSBfdGV4dHVyZVNpemU6bnVtYmVyIC8qdWludCovID0gNTEyO1xyXG5cdHByaXZhdGUgX3BvbHlPZmZzZXQ6QXJyYXk8bnVtYmVyPiA9IEFycmF5PG51bWJlcj4oMTUsIDAsIDAsIDApO1xyXG5cdHByaXZhdGUgX2VuYzpBcnJheTxudW1iZXI+O1xyXG5cdHByaXZhdGUgX3Byb2plY3Rpb25UZXh0dXJlc0ludmFsaWQ6Qm9vbGVhbiA9IHRydWU7XHJcblxyXG5cdC8qKlxyXG5cdCAqIFRoZSBzaXplIG9mIHRoZSBkZXB0aCBtYXAgdGV4dHVyZSB0byByZW5kZXIgdG8uXHJcblx0ICovXHJcblx0cHVibGljIGdldCB0ZXh0dXJlU2l6ZSgpOm51bWJlclxyXG5cdHtcclxuXHRcdHJldHVybiB0aGlzLl90ZXh0dXJlU2l6ZTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzZXQgdGV4dHVyZVNpemUodmFsdWU6bnVtYmVyKVxyXG5cdHtcclxuXHRcdHRoaXMuX3RleHR1cmVTaXplID0gdmFsdWU7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBUaGUgYW1vdW50IGJ5IHdoaWNoIHRoZSByZW5kZXJlZCBvYmplY3Qgd2lsbCBiZSBpbmZsYXRlZCwgdG8gcHJldmVudCBkZXB0aCBtYXAgcm91bmRpbmcgZXJyb3JzLlxyXG5cdCAqL1xyXG5cdHB1YmxpYyBnZXQgcG9seU9mZnNldCgpOm51bWJlclxyXG5cdHtcclxuXHRcdHJldHVybiB0aGlzLl9wb2x5T2Zmc2V0WzBdO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHNldCBwb2x5T2Zmc2V0KHZhbHVlOm51bWJlcilcclxuXHR7XHJcblx0XHR0aGlzLl9wb2x5T2Zmc2V0WzBdID0gdmFsdWU7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDcmVhdGVzIGEgbmV3IFNpbmdsZU9iamVjdERlcHRoUGFzcyBvYmplY3QuXHJcblx0ICovXHJcblx0Y29uc3RydWN0b3IocmVuZGVyT2JqZWN0OlJlbmRlck9iamVjdEJhc2UsIHJlbmRlck9iamVjdE93bmVyOklSZW5kZXJPYmplY3RPd25lciwgcmVuZGVyYWJsZUNsYXNzOklSZW5kZXJhYmxlQ2xhc3MsIHN0YWdlOlN0YWdlKVxyXG5cdHtcclxuXHRcdHN1cGVyKHJlbmRlck9iamVjdCwgcmVuZGVyT2JqZWN0T3duZXIsIHJlbmRlcmFibGVDbGFzcywgc3RhZ2UpO1xyXG5cclxuXHRcdC8vdGhpcy5fcE51bVVzZWRTdHJlYW1zID0gMjtcclxuXHRcdC8vdGhpcy5fcE51bVVzZWRWZXJ0ZXhDb25zdGFudHMgPSA3O1xyXG5cdFx0Ly90aGlzLl9lbmMgPSBBcnJheTxudW1iZXI+KDEuMCwgMjU1LjAsIDY1MDI1LjAsIDE2NTgxMzc1LjAsIDEuMC8yNTUuMCwgMS4wLzI1NS4wLCAxLjAvMjU1LjAsIDAuMCk7XHJcblx0XHQvL1xyXG5cdFx0Ly90aGlzLl9wQW5pbWF0YWJsZUF0dHJpYnV0ZXMgPSBBcnJheTxzdHJpbmc+KFwidmEwXCIsIFwidmExXCIpO1xyXG5cdFx0Ly90aGlzLl9wQW5pbWF0aW9uVGFyZ2V0UmVnaXN0ZXJzID0gQXJyYXk8c3RyaW5nPihcInZ0MFwiLCBcInZ0MVwiKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEBpbmhlcml0RG9jXHJcblx0ICovXHJcblx0cHVibGljIGRpc3Bvc2UoKVxyXG5cdHtcclxuXHRcdGlmICh0aGlzLl90ZXh0dXJlcykge1xyXG5cdFx0XHRmb3IgKHZhciBrZXkgaW4gdGhpcy5fdGV4dHVyZXMpIHtcclxuXHRcdFx0XHR2YXIgdGV4dHVyZTpSZW5kZXJUZXh0dXJlID0gdGhpcy5fdGV4dHVyZXNba2V5XTtcclxuXHRcdFx0XHR0ZXh0dXJlLmRpc3Bvc2UoKTtcclxuXHRcdFx0fVxyXG5cdFx0XHR0aGlzLl90ZXh0dXJlcyA9IG51bGw7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBVcGRhdGVzIHRoZSBwcm9qZWN0aW9uIHRleHR1cmVzIHVzZWQgdG8gY29udGFpbiB0aGUgZGVwdGggcmVuZGVycy5cclxuXHQgKi9cclxuXHRwcml2YXRlIHVwZGF0ZVByb2plY3Rpb25UZXh0dXJlcygpXHJcblx0e1xyXG5cdFx0aWYgKHRoaXMuX3RleHR1cmVzKSB7XHJcblx0XHRcdGZvciAodmFyIGtleSBpbiB0aGlzLl90ZXh0dXJlcykge1xyXG5cdFx0XHRcdHZhciB0ZXh0dXJlOlJlbmRlclRleHR1cmUgPSB0aGlzLl90ZXh0dXJlc1trZXldO1xyXG5cdFx0XHRcdHRleHR1cmUuZGlzcG9zZSgpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0dGhpcy5fdGV4dHVyZXMgPSBuZXcgT2JqZWN0KCk7XHJcblx0XHR0aGlzLl9wcm9qZWN0aW9ucyA9IG5ldyBPYmplY3QoKTtcclxuXHRcdHRoaXMuX3Byb2plY3Rpb25UZXh0dXJlc0ludmFsaWQgPSBmYWxzZTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEBpbmhlcml0RG9jXHJcblx0ICovXHJcblx0cHVibGljIF9pR2V0VmVydGV4Q29kZSgpOnN0cmluZ1xyXG5cdHtcclxuXHRcdHZhciBjb2RlOnN0cmluZztcclxuXHRcdC8vIG9mZnNldFxyXG5cdFx0Y29kZSA9IFwibXVsIHZ0NywgdnQxLCB2YzQueFx0XFxuXCIgK1xyXG5cdFx0XHRcdFwiYWRkIHZ0NywgdnQ3LCB2dDBcXG5cIiArXHJcblx0XHRcdFx0XCJtb3YgdnQ3LncsIHZ0MC53XFxuXCI7XHJcblx0XHQvLyBwcm9qZWN0XHJcblx0XHRjb2RlICs9IFwibTQ0IHZ0MiwgdnQ3LCB2YzBcXG5cIiArXHJcblx0XHRcdFx0XCJtb3Ygb3AsIHZ0MlxcblwiO1xyXG5cclxuXHRcdC8vIHBlcnNwZWN0aXZlIGRpdmlkZVxyXG5cdFx0Y29kZSArPSBcImRpdiB2MCwgdnQyLCB2dDIud1xcblwiO1xyXG5cclxuXHRcdHJldHVybiBjb2RlO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQGluaGVyaXREb2NcclxuXHQgKi9cclxuXHRwdWJsaWMgX2lHZXRGcmFnbWVudENvZGUoc2hhZGVyT2JqZWN0OlNoYWRlck9iamVjdEJhc2UsIHJlZ2lzdGVyQ2FjaGU6U2hhZGVyUmVnaXN0ZXJDYWNoZSwgc2hhcmVkUmVnaXN0ZXJzOlNoYWRlclJlZ2lzdGVyRGF0YSk6c3RyaW5nXHJcblx0e1xyXG5cdFx0dmFyIGNvZGU6c3RyaW5nID0gXCJcIjtcclxuXHJcblx0XHQvLyBlbmNvZGUgZmxvYXQgLT4gcmdiYVxyXG5cdFx0Y29kZSArPSBcIm11bCBmdDAsIGZjMCwgdjAuelxcblwiICtcclxuXHRcdFx0XHRcImZyYyBmdDAsIGZ0MFxcblwiICtcclxuXHRcdFx0XHRcIm11bCBmdDEsIGZ0MC55end3LCBmYzFcXG5cIiArXHJcblx0XHRcdFx0XCJzdWIgZnQwLCBmdDAsIGZ0MVxcblwiICtcclxuXHRcdFx0XHRcIm1vdiBvYywgZnQwXFxuXCI7XHJcblxyXG5cdFx0cmV0dXJuIGNvZGU7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBHZXRzIHRoZSBkZXB0aCBtYXBzIHJlbmRlcmVkIGZvciB0aGlzIG9iamVjdCBmcm9tIGFsbCBsaWdodHMuXHJcblx0ICogQHBhcmFtIHJlbmRlcmFibGUgVGhlIHJlbmRlcmFibGUgZm9yIHdoaWNoIHRvIHJldHJpZXZlIHRoZSBkZXB0aCBtYXBzLlxyXG5cdCAqIEBwYXJhbSBzdGFnZTNEUHJveHkgVGhlIFN0YWdlM0RQcm94eSBvYmplY3QgY3VycmVudGx5IHVzZWQgZm9yIHJlbmRlcmluZy5cclxuXHQgKiBAcmV0dXJuIEEgbGlzdCBvZiBkZXB0aCBtYXAgdGV4dHVyZXMgZm9yIGFsbCBzdXBwb3J0ZWQgbGlnaHRzLlxyXG5cdCAqL1xyXG5cdHB1YmxpYyBfaUdldERlcHRoTWFwKHJlbmRlcmFibGU6UmVuZGVyYWJsZUJhc2UpOlJlbmRlclRleHR1cmVcclxuXHR7XHJcblx0XHRyZXR1cm4gdGhpcy5fdGV4dHVyZXNbcmVuZGVyYWJsZS5yZW5kZXJhYmxlT3duZXIuaWRdO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogUmV0cmlldmVzIHRoZSBkZXB0aCBtYXAgcHJvamVjdGlvbiBtYXBzIGZvciBhbGwgbGlnaHRzLlxyXG5cdCAqIEBwYXJhbSByZW5kZXJhYmxlIFRoZSByZW5kZXJhYmxlIGZvciB3aGljaCB0byByZXRyaWV2ZSB0aGUgcHJvamVjdGlvbiBtYXBzLlxyXG5cdCAqIEByZXR1cm4gQSBsaXN0IG9mIHByb2plY3Rpb24gbWFwcyBmb3IgYWxsIHN1cHBvcnRlZCBsaWdodHMuXHJcblx0ICovXHJcblx0cHVibGljIF9pR2V0UHJvamVjdGlvbihyZW5kZXJhYmxlOlJlbmRlcmFibGVCYXNlKTpNYXRyaXgzRFxyXG5cdHtcclxuXHRcdHJldHVybiB0aGlzLl9wcm9qZWN0aW9uc1tyZW5kZXJhYmxlLnJlbmRlcmFibGVPd25lci5pZF07XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBAaW5oZXJpdERvY1xyXG5cdCAqL1xyXG5cdHB1YmxpYyBfaVJlbmRlcihyZW5kZXJhYmxlOlJlbmRlcmFibGVCYXNlLCBjYW1lcmE6Q2FtZXJhLCB2aWV3UHJvamVjdGlvbjpNYXRyaXgzRClcclxuXHR7XHJcblx0XHR2YXIgbWF0cml4Ok1hdHJpeDNEO1xyXG5cdFx0dmFyIGNvbnRleHQ6SUNvbnRleHRHTCA9IHRoaXMuX3N0YWdlLmNvbnRleHQ7XHJcblx0XHR2YXIgbGVuOm51bWJlciAvKnVpbnQqLztcclxuXHRcdHZhciBsaWdodDpMaWdodEJhc2U7XHJcblx0XHR2YXIgbGlnaHRzOkFycmF5PExpZ2h0QmFzZT4gPSB0aGlzLl9yZW5kZXJPYmplY3RPd25lci5saWdodFBpY2tlci5hbGxQaWNrZWRMaWdodHM7XHJcblx0XHR2YXIgcklkOm51bWJlciA9IHJlbmRlcmFibGUucmVuZGVyYWJsZU93bmVyLmlkO1xyXG5cclxuXHRcdGlmICghdGhpcy5fdGV4dHVyZXNbcklkXSlcclxuXHRcdFx0dGhpcy5fdGV4dHVyZXNbcklkXSA9IG5ldyBSZW5kZXJUZXh0dXJlKHRoaXMuX3RleHR1cmVTaXplLCB0aGlzLl90ZXh0dXJlU2l6ZSk7XHJcblxyXG5cdFx0aWYgKCF0aGlzLl9wcm9qZWN0aW9uc1tySWRdKVxyXG5cdFx0XHR0aGlzLl9wcm9qZWN0aW9uc1tySWRdID0gbmV3IE1hdHJpeDNEKCk7XHJcblxyXG5cdFx0bGVuID0gbGlnaHRzLmxlbmd0aDtcclxuXHJcblx0XHQvLyBsb2NhbCBwb3NpdGlvbiA9IGVub3VnaFxyXG5cdFx0bGlnaHQgPSBsaWdodHNbMF07XHJcblxyXG5cdFx0bWF0cml4ID0gbGlnaHQuaUdldE9iamVjdFByb2plY3Rpb25NYXRyaXgocmVuZGVyYWJsZS5zb3VyY2VFbnRpdHksIGNhbWVyYSwgdGhpcy5fcHJvamVjdGlvbnNbcklkXSk7XHJcblxyXG5cdFx0dGhpcy5fc3RhZ2Uuc2V0UmVuZGVyVGFyZ2V0KHRoaXMuX3RleHR1cmVzW3JJZF0sIHRydWUpO1xyXG5cdFx0Y29udGV4dC5jbGVhcigxLjAsIDEuMCwgMS4wKTtcclxuXHRcdGNvbnRleHQuc2V0UHJvZ3JhbUNvbnN0YW50c0Zyb21NYXRyaXgoQ29udGV4dEdMUHJvZ3JhbVR5cGUuVkVSVEVYLCAwLCBtYXRyaXgsIHRydWUpO1xyXG5cdFx0Y29udGV4dC5zZXRQcm9ncmFtQ29uc3RhbnRzRnJvbUFycmF5KENvbnRleHRHTFByb2dyYW1UeXBlLkZSQUdNRU5ULCAwLCB0aGlzLl9lbmMsIDIpO1xyXG5cclxuXHRcdHRoaXMuX3N0YWdlLmFjdGl2YXRlQnVmZmVyKDAsIHJlbmRlcmFibGUuZ2V0VmVydGV4RGF0YShUcmlhbmdsZVN1Ykdlb21ldHJ5LlBPU0lUSU9OX0RBVEEpLCByZW5kZXJhYmxlLmdldFZlcnRleE9mZnNldChUcmlhbmdsZVN1Ykdlb21ldHJ5LlBPU0lUSU9OX0RBVEEpLCBUcmlhbmdsZVN1Ykdlb21ldHJ5LlBPU0lUSU9OX0ZPUk1BVCk7XHJcblx0XHR0aGlzLl9zdGFnZS5hY3RpdmF0ZUJ1ZmZlcigxLCByZW5kZXJhYmxlLmdldFZlcnRleERhdGEoVHJpYW5nbGVTdWJHZW9tZXRyeS5OT1JNQUxfREFUQSksIHJlbmRlcmFibGUuZ2V0VmVydGV4T2Zmc2V0KFRyaWFuZ2xlU3ViR2VvbWV0cnkuTk9STUFMX0RBVEEpLCBUcmlhbmdsZVN1Ykdlb21ldHJ5Lk5PUk1BTF9GT1JNQVQpO1xyXG5cdFx0Y29udGV4dC5kcmF3VHJpYW5nbGVzKHRoaXMuX3N0YWdlLmdldEluZGV4QnVmZmVyKHJlbmRlcmFibGUuZ2V0SW5kZXhEYXRhKCkpLCAwLCByZW5kZXJhYmxlLm51bVRyaWFuZ2xlcyk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBAaW5oZXJpdERvY1xyXG5cdCAqL1xyXG5cdHB1YmxpYyBfaUFjdGl2YXRlKGNhbWVyYTpDYW1lcmEpXHJcblx0e1xyXG5cdFx0aWYgKHRoaXMuX3Byb2plY3Rpb25UZXh0dXJlc0ludmFsaWQpXHJcblx0XHRcdHRoaXMudXBkYXRlUHJvamVjdGlvblRleHR1cmVzKCk7XHJcblxyXG5cdFx0Ly8gbmV2ZXIgc2NhbGVcclxuXHRcdHN1cGVyLl9pQWN0aXZhdGUoY2FtZXJhKTtcclxuXHJcblx0XHR0aGlzLl9zdGFnZS5jb250ZXh0LnNldFByb2dyYW1Db25zdGFudHNGcm9tQXJyYXkoQ29udGV4dEdMUHJvZ3JhbVR5cGUuVkVSVEVYLCA0LCB0aGlzLl9wb2x5T2Zmc2V0LCAxKTtcclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCA9IFNpbmdsZU9iamVjdERlcHRoUGFzczsiXX0=