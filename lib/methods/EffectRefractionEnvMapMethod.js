var __extends = this.__extends || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    __.prototype = b.prototype;
    d.prototype = new __();
};
var ShaderCompilerHelper = require("awayjs-renderergl/lib/utils/ShaderCompilerHelper");
var EffectMethodBase = require("awayjs-methodmaterials/lib/methods/EffectMethodBase");
/**
 * EffectRefractionEnvMapMethod provides a method to add refracted transparency based on cube maps.
 */
var EffectRefractionEnvMapMethod = (function (_super) {
    __extends(EffectRefractionEnvMapMethod, _super);
    /**
     * Creates a new EffectRefractionEnvMapMethod object. Example values for dispersion are: dispersionR: -0.03, dispersionG: -0.01, dispersionB: = .0015
     *
     * @param envMap The environment map containing the refracted scene.
     * @param refractionIndex The refractive index of the material.
     * @param dispersionR The amount of chromatic dispersion of the red channel. Defaults to 0 (none).
     * @param dispersionG The amount of chromatic dispersion of the green channel. Defaults to 0 (none).
     * @param dispersionB The amount of chromatic dispersion of the blue channel. Defaults to 0 (none).
     */
    function EffectRefractionEnvMapMethod(envMap, refractionIndex, dispersionR, dispersionG, dispersionB) {
        if (refractionIndex === void 0) { refractionIndex = .1; }
        if (dispersionR === void 0) { dispersionR = 0; }
        if (dispersionG === void 0) { dispersionG = 0; }
        if (dispersionB === void 0) { dispersionB = 0; }
        _super.call(this);
        this._dispersionR = 0;
        this._dispersionG = 0;
        this._dispersionB = 0;
        this._alpha = 1;
        this._envMap = envMap;
        this._dispersionR = dispersionR;
        this._dispersionG = dispersionG;
        this._dispersionB = dispersionB;
        this._useDispersion = !(this._dispersionR == this._dispersionB && this._dispersionR == this._dispersionG);
        this._refractionIndex = refractionIndex;
    }
    /**
     * @inheritDoc
     */
    EffectRefractionEnvMapMethod.prototype.iInitConstants = function (shaderObject, methodVO) {
        var index = methodVO.fragmentConstantsIndex;
        var data = shaderObject.fragmentConstantData;
        data[index + 4] = 1;
        data[index + 5] = 0;
        data[index + 7] = 1;
    };
    /**
     * @inheritDoc
     */
    EffectRefractionEnvMapMethod.prototype.iInitVO = function (shaderObject, methodVO) {
        methodVO.needsNormals = true;
        methodVO.needsView = true;
    };
    Object.defineProperty(EffectRefractionEnvMapMethod.prototype, "envMap", {
        /**
         * The cube environment map to use for the refraction.
         */
        get: function () {
            return this._envMap;
        },
        set: function (value) {
            this._envMap = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(EffectRefractionEnvMapMethod.prototype, "refractionIndex", {
        /**
         * The refractive index of the material.
         */
        get: function () {
            return this._refractionIndex;
        },
        set: function (value) {
            this._refractionIndex = value;
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(EffectRefractionEnvMapMethod.prototype, "dispersionR", {
        /**
         * The amount of chromatic dispersion of the red channel. Defaults to 0 (none).
         */
        get: function () {
            return this._dispersionR;
        },
        set: function (value) {
            this._dispersionR = value;
            var useDispersion = !(this._dispersionR == this._dispersionB && this._dispersionR == this._dispersionG);
            if (this._useDispersion != useDispersion) {
                this.iInvalidateShaderProgram();
                this._useDispersion = useDispersion;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(EffectRefractionEnvMapMethod.prototype, "dispersionG", {
        /**
         * The amount of chromatic dispersion of the green channel. Defaults to 0 (none).
         */
        get: function () {
            return this._dispersionG;
        },
        set: function (value) {
            this._dispersionG = value;
            var useDispersion = !(this._dispersionR == this._dispersionB && this._dispersionR == this._dispersionG);
            if (this._useDispersion != useDispersion) {
                this.iInvalidateShaderProgram();
                this._useDispersion = useDispersion;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(EffectRefractionEnvMapMethod.prototype, "dispersionB", {
        /**
         * The amount of chromatic dispersion of the blue channel. Defaults to 0 (none).
         */
        get: function () {
            return this._dispersionB;
        },
        set: function (value) {
            this._dispersionB = value;
            var useDispersion = !(this._dispersionR == this._dispersionB && this._dispersionR == this._dispersionG);
            if (this._useDispersion != useDispersion) {
                this.iInvalidateShaderProgram();
                this._useDispersion = useDispersion;
            }
        },
        enumerable: true,
        configurable: true
    });
    Object.defineProperty(EffectRefractionEnvMapMethod.prototype, "alpha", {
        /**
         * The amount of transparency of the object. Warning: the alpha applies to the refracted color, not the actual
         * material. A value of 1 will make it appear fully transparent.
         */
        get: function () {
            return this._alpha;
        },
        set: function (value) {
            this._alpha = value;
        },
        enumerable: true,
        configurable: true
    });
    /**
     * @inheritDoc
     */
    EffectRefractionEnvMapMethod.prototype.iActivate = function (shaderObject, methodVO, stage) {
        var index = methodVO.fragmentConstantsIndex;
        var data = shaderObject.fragmentConstantData;
        data[index] = this._dispersionR + this._refractionIndex;
        if (this._useDispersion) {
            data[index + 1] = this._dispersionG + this._refractionIndex;
            data[index + 2] = this._dispersionB + this._refractionIndex;
        }
        data[index + 3] = this._alpha;
        stage.activateCubeTexture(methodVO.texturesIndex, this._envMap, shaderObject.useSmoothTextures, shaderObject.useMipmapping);
    };
    /**
     * @inheritDoc
     */
    EffectRefractionEnvMapMethod.prototype.iGetFragmentCode = function (shaderObject, methodVO, targetReg, registerCache, sharedRegisters) {
        // todo: data2.x could use common reg, so only 1 reg is used
        var data = registerCache.getFreeFragmentConstant();
        var data2 = registerCache.getFreeFragmentConstant();
        var code = "";
        var cubeMapReg = registerCache.getFreeTextureReg();
        var refractionDir;
        var refractionColor;
        var temp;
        methodVO.texturesIndex = cubeMapReg.index;
        methodVO.fragmentConstantsIndex = data.index * 4;
        refractionDir = registerCache.getFreeFragmentVectorTemp();
        registerCache.addFragmentTempUsages(refractionDir, 1);
        refractionColor = registerCache.getFreeFragmentVectorTemp();
        registerCache.addFragmentTempUsages(refractionColor, 1);
        temp = registerCache.getFreeFragmentVectorTemp();
        var viewDirReg = sharedRegisters.viewDirFragment;
        var normalReg = sharedRegisters.normalFragment;
        code += "neg " + viewDirReg + ".xyz, " + viewDirReg + ".xyz\n";
        code += "dp3 " + temp + ".x, " + viewDirReg + ".xyz, " + normalReg + ".xyz\n" + "mul " + temp + ".w, " + temp + ".x, " + temp + ".x\n" + "sub " + temp + ".w, " + data2 + ".x, " + temp + ".w\n" + "mul " + temp + ".w, " + data + ".x, " + temp + ".w\n" + "mul " + temp + ".w, " + data + ".x, " + temp + ".w\n" + "sub " + temp + ".w, " + data2 + ".x, " + temp + ".w\n" + "sqt " + temp + ".y, " + temp + ".w\n" + "mul " + temp + ".x, " + data + ".x, " + temp + ".x\n" + "add " + temp + ".x, " + temp + ".x, " + temp + ".y\n" + "mul " + temp + ".xyz, " + temp + ".x, " + normalReg + ".xyz\n" + "mul " + refractionDir + ", " + data + ".x, " + viewDirReg + "\n" + "sub " + refractionDir + ".xyz, " + refractionDir + ".xyz, " + temp + ".xyz\n" + "nrm " + refractionDir + ".xyz, " + refractionDir + ".xyz\n";
        code += ShaderCompilerHelper.getTexCubeSampleCode(refractionColor, cubeMapReg, this._envMap, shaderObject.useSmoothTextures, shaderObject.useMipmapping, refractionDir) + "sub " + refractionColor + ".w, " + refractionColor + ".w, fc0.x	\n" + "kil " + refractionColor + ".w\n";
        if (this._useDispersion) {
            // GREEN
            code += "dp3 " + temp + ".x, " + viewDirReg + ".xyz, " + normalReg + ".xyz\n" + "mul " + temp + ".w, " + temp + ".x, " + temp + ".x\n" + "sub " + temp + ".w, " + data2 + ".x, " + temp + ".w\n" + "mul " + temp + ".w, " + data + ".y, " + temp + ".w\n" + "mul " + temp + ".w, " + data + ".y, " + temp + ".w\n" + "sub " + temp + ".w, " + data2 + ".x, " + temp + ".w\n" + "sqt " + temp + ".y, " + temp + ".w\n" + "mul " + temp + ".x, " + data + ".y, " + temp + ".x\n" + "add " + temp + ".x, " + temp + ".x, " + temp + ".y\n" + "mul " + temp + ".xyz, " + temp + ".x, " + normalReg + ".xyz\n" + "mul " + refractionDir + ", " + data + ".y, " + viewDirReg + "\n" + "sub " + refractionDir + ".xyz, " + refractionDir + ".xyz, " + temp + ".xyz\n" + "nrm " + refractionDir + ".xyz, " + refractionDir + ".xyz\n";
            code += ShaderCompilerHelper.getTexCubeSampleCode(temp, cubeMapReg, this._envMap, shaderObject.useSmoothTextures, shaderObject.useMipmapping, refractionDir) + "mov " + refractionColor + ".y, " + temp + ".y\n";
            // BLUE
            code += "dp3 " + temp + ".x, " + viewDirReg + ".xyz, " + normalReg + ".xyz\n" + "mul " + temp + ".w, " + temp + ".x, " + temp + ".x\n" + "sub " + temp + ".w, " + data2 + ".x, " + temp + ".w\n" + "mul " + temp + ".w, " + data + ".z, " + temp + ".w\n" + "mul " + temp + ".w, " + data + ".z, " + temp + ".w\n" + "sub " + temp + ".w, " + data2 + ".x, " + temp + ".w\n" + "sqt " + temp + ".y, " + temp + ".w\n" + "mul " + temp + ".x, " + data + ".z, " + temp + ".x\n" + "add " + temp + ".x, " + temp + ".x, " + temp + ".y\n" + "mul " + temp + ".xyz, " + temp + ".x, " + normalReg + ".xyz\n" + "mul " + refractionDir + ", " + data + ".z, " + viewDirReg + "\n" + "sub " + refractionDir + ".xyz, " + refractionDir + ".xyz, " + temp + ".xyz\n" + "nrm " + refractionDir + ".xyz, " + refractionDir + ".xyz\n";
            code += ShaderCompilerHelper.getTexCubeSampleCode(temp, cubeMapReg, this._envMap, shaderObject.useSmoothTextures, shaderObject.useMipmapping, refractionDir) + "mov " + refractionColor + ".z, " + temp + ".z\n";
        }
        registerCache.removeFragmentTempUsage(refractionDir);
        code += "sub " + refractionColor + ".xyz, " + refractionColor + ".xyz, " + targetReg + ".xyz\n" + "mul " + refractionColor + ".xyz, " + refractionColor + ".xyz, " + data + ".w\n" + "add " + targetReg + ".xyz, " + targetReg + ".xyz, " + refractionColor + ".xyz\n";
        registerCache.removeFragmentTempUsage(refractionColor);
        // restore
        code += "neg " + viewDirReg + ".xyz, " + viewDirReg + ".xyz\n";
        return code;
    };
    return EffectRefractionEnvMapMethod;
})(EffectMethodBase);
module.exports = EffectRefractionEnvMapMethod;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImF3YXlqcy1tZXRob2RtYXRlcmlhbHMvbGliL21ldGhvZHMvRWZmZWN0UmVmcmFjdGlvbkVudk1hcE1ldGhvZC50cyJdLCJuYW1lcyI6WyJFZmZlY3RSZWZyYWN0aW9uRW52TWFwTWV0aG9kIiwiRWZmZWN0UmVmcmFjdGlvbkVudk1hcE1ldGhvZC5jb25zdHJ1Y3RvciIsIkVmZmVjdFJlZnJhY3Rpb25FbnZNYXBNZXRob2QuaUluaXRDb25zdGFudHMiLCJFZmZlY3RSZWZyYWN0aW9uRW52TWFwTWV0aG9kLmlJbml0Vk8iLCJFZmZlY3RSZWZyYWN0aW9uRW52TWFwTWV0aG9kLmVudk1hcCIsIkVmZmVjdFJlZnJhY3Rpb25FbnZNYXBNZXRob2QucmVmcmFjdGlvbkluZGV4IiwiRWZmZWN0UmVmcmFjdGlvbkVudk1hcE1ldGhvZC5kaXNwZXJzaW9uUiIsIkVmZmVjdFJlZnJhY3Rpb25FbnZNYXBNZXRob2QuZGlzcGVyc2lvbkciLCJFZmZlY3RSZWZyYWN0aW9uRW52TWFwTWV0aG9kLmRpc3BlcnNpb25CIiwiRWZmZWN0UmVmcmFjdGlvbkVudk1hcE1ldGhvZC5hbHBoYSIsIkVmZmVjdFJlZnJhY3Rpb25FbnZNYXBNZXRob2QuaUFjdGl2YXRlIiwiRWZmZWN0UmVmcmFjdGlvbkVudk1hcE1ldGhvZC5pR2V0RnJhZ21lbnRDb2RlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFRQSxJQUFPLG9CQUFvQixXQUFjLGtEQUFrRCxDQUFDLENBQUM7QUFHN0YsSUFBTyxnQkFBZ0IsV0FBZSxxREFBcUQsQ0FBQyxDQUFDO0FBRTdGLEFBR0E7O0dBREc7SUFDRyw0QkFBNEI7SUFBU0EsVUFBckNBLDRCQUE0QkEsVUFBeUJBO0lBVzFEQTs7Ozs7Ozs7T0FRR0E7SUFDSEEsU0FwQktBLDRCQUE0QkEsQ0FvQnJCQSxNQUFzQkEsRUFBRUEsZUFBMkJBLEVBQUVBLFdBQXNCQSxFQUFFQSxXQUFzQkEsRUFBRUEsV0FBc0JBO1FBQW5HQywrQkFBMkJBLEdBQTNCQSxvQkFBMkJBO1FBQUVB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Q0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFDdERBLGVBQWVBLEdBQUdBLGFBQWFBLENBQUNBLHlCQUF5QkEsRUFBRUEsQ0FBQ0E7UUFDNURBLGFBQWFBLENBQUNBLHFCQUFxQkEsQ0FBQ0EsZUFBZUEsRUFBRUEsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7UUFFeERBLElBQUlBLEdBQUdBLGFBQWFBLENBQUNBLHlCQUF5QkEsRUFBRUEsQ0FBQ0E7UUFFakRBLElBQUlBLFVBQVVBLEdBQXlCQSxlQUFlQSxDQUFDQSxlQUFlQSxDQUFDQTtRQUN2RUEsSUFBSUEsU0FBU0EsR0FBeUJBLGVBQWVBLENBQUNBLGNBQWNBLENBQUNBO1FBRXJFQSxJQUFJQSxJQUFJQSxNQUFNQSxHQUFHQSxVQUFVQSxHQUFHQSxRQUFRQSxHQUFHQSxVQUFVQSxHQUFHQSxRQUFRQSxDQUFDQTtRQUUvREEsSUFBSUEsSUFBSUEsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsVUFBVUEsR0FBR0EsUUFBUUEsR0FBR0EsU0FBU0EsR0FBR0EsUUFBUUEsR0FDNUVBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQ3REQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxLQUFLQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUN2REEsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FDdERBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQ3REQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxLQUFLQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUN2REEsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FFdENBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQ3REQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUN0REEsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsUUFBUUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsU0FBU0EsR0FBR0EsUUFBUUEsR0FFL0RBLE1BQU1BLEdBQUdBLGFBQWFBLEdBQUdBLElBQUlBLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLFVBQVVBLEdBQUdBLElBQUlBLEdBQ2pFQSxNQUFNQSxHQUFHQSxhQUFhQSxHQUFHQSxRQUFRQSxHQUFHQSxhQUFhQSxHQUFHQSxRQUFRQSxHQUFHQSxJQUFJQSxHQUFHQSxRQUFRQSxHQUM5RUEsTUFBTUEsR0FBR0EsYUFBYUEsR0FBR0EsUUFBUUEsR0FBR0EsYUFBYUEsR0FBR0EsUUFBUUEsQ0FBQ0E7UUFDOURBLElBQUlBLElBQUlBLG9CQUFvQkEsQ0FBQ0Esb0JBQW9CQSxDQUFDQSxlQUFlQSxFQUFFQSxVQUFVQSxFQUFFQSxJQUFJQSxDQUFDQSxPQUFPQSxFQUFFQSxZQUFZQSxDQUFDQSxpQkFBaUJBLEVBQUVBLFlBQVlBLENBQUNBLGFBQWFBLEVBQUVBLGFBQWFBLENBQUNBLEdBQ3RLQSxNQUFNQSxHQUFHQSxlQUFlQSxHQUFHQSxNQUFNQSxHQUFHQSxlQUFlQSxHQUFHQSxjQUFjQSxHQUNwRUEsTUFBTUEsR0FBR0EsZUFBZUEsR0FBR0EsTUFBTUEsQ0FBQ0E7UUFFbkNBLEVBQUVBLENBQUNBLENBQUNBLElBQUlBLENBQUNBLGNBQWNBLENBQUNBLENBQUNBLENBQUNBO1lBQ3pCQSxBQUNBQSxRQURRQTtZQUNSQSxJQUFJQSxJQUFJQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxVQUFVQSxHQUFHQSxRQUFRQSxHQUFHQSxTQUFTQSxHQUFHQSxRQUFRQSxHQUM1RUEsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FDdERBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLEtBQUtBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQ3ZEQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUN0REEsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FDdERBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLEtBQUtBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQ3ZEQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUV0Q0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FDdERBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQ3REQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxRQUFRQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxTQUFTQSxHQUFHQSxRQUFRQSxHQUUvREEsTUFBTUEsR0FBR0EsYUFBYUEsR0FBR0EsSUFBSUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsVUFBVUEsR0FBR0EsSUFBSUEsR0FDakVBLE1BQU1BLEdBQUdBLGFBQWFBLEdBQUdBLFFBQVFBLEdBQUdBLGFBQWFBLEdBQUdBLFFBQVFBLEdBQUdBLElBQUlBLEdBQUdBLFFBQVFBLEdBQzlFQSxNQUFNQSxHQUFHQSxhQUFhQSxHQUFHQSxRQUFRQSxHQUFHQSxhQUFhQSxHQUFHQSxRQUFRQSxDQUFDQTtZQUM5REEsSUFBSUEsSUFBSUEsb0JBQW9CQSxDQUFDQSxvQkFBb0JBLENBQUNBLElBQUlBLEVBQUVBLFVBQVVBLEVBQUVBLElBQUlBLENBQUNBLE9BQU9BLEVBQUVBLFlBQVlBLENBQUNBLGlCQUFpQkEsRUFBRUEsWUFBWUEsQ0FBQ0EsYUFBYUEsRUFBRUEsYUFBYUEsQ0FBQ0EsR0FDM0pBLE1BQU1BLEdBQUdBLGVBQWVBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLENBQUNBO1lBRW5EQSxBQUNBQSxPQURPQTtZQUNQQSxJQUFJQSxJQUFJQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxVQUFVQSxHQUFHQSxRQUFRQSxHQUFHQSxTQUFTQSxHQUFHQSxRQUFRQSxHQUM1RUEsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FDdERBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLEtBQUtBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQ3ZEQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUN0REEsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FDdERBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLEtBQUtBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQ3ZEQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUV0Q0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FDdERBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLEdBQ3REQSxNQUFNQSxHQUFHQSxJQUFJQSxHQUFHQSxRQUFRQSxHQUFHQSxJQUFJQSxHQUFHQSxNQUFNQSxHQUFHQSxTQUFTQSxHQUFHQSxRQUFRQSxHQUUvREEsTUFBTUEsR0FBR0EsYUFBYUEsR0FBR0EsSUFBSUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FBR0EsVUFBVUEsR0FBR0EsSUFBSUEsR0FDakVBLE1BQU1BLEdBQUdBLGFBQWFBLEdBQUdBLFFBQVFBLEdBQUdBLGFBQWFBLEdBQUdBLFFBQVFBLEdBQUdBLElBQUlBLEdBQUdBLFFBQVFBLEdBQzlFQSxNQUFNQSxHQUFHQSxhQUFhQSxHQUFHQSxRQUFRQSxHQUFHQSxhQUFhQSxHQUFHQSxRQUFRQSxDQUFDQTtZQUM5REEsSUFBSUEsSUFBSUEsb0JBQW9CQSxDQUFDQSxvQkFBb0JBLENBQUNBLElBQUlBLEVBQUVBLFVBQVVBLEVBQUVBLElBQUlBLENBQUNBLE9BQU9BLEVBQUVBLFlBQVlBLENBQUNBLGlCQUFpQkEsRUFBRUEsWUFBWUEsQ0FBQ0EsYUFBYUEsRUFBRUEsYUFBYUEsQ0FBQ0EsR0FDM0pBLE1BQU1BLEdBQUdBLGVBQWVBLEdBQUdBLE1BQU1BLEdBQUdBLElBQUlBLEdBQUdBLE1BQU1BLENBQUNBO1FBQ3BEQSxDQUFDQTtRQUVEQSxhQUFhQSxDQUFDQSx1QkFBdUJBLENBQUNBLGFBQWFBLENBQUNBLENBQUNBO1FBRXJEQSxJQUFJQSxJQUFJQSxNQUFNQSxHQUFHQSxlQUFlQSxHQUFHQSxRQUFRQSxHQUFHQSxlQUFlQSxHQUFHQSxRQUFRQSxHQUFHQSxTQUFTQSxHQUFHQSxRQUFRQSxHQUM5RkEsTUFBTUEsR0FBR0EsZUFBZUEsR0FBR0EsUUFBUUEsR0FBR0EsZUFBZUEsR0FBR0EsUUFBUUEsR0FBR0EsSUFBSUEsR0FBR0EsTUFBTUEsR0FDaEZBLE1BQU1BLEdBQUdBLFNBQVNBLEdBQUdBLFFBQVFBLEdBQUdBLFNBQVNBLEdBQUdBLFFBQVFBLEdBQUdBLGVBQWVBLEdBQUdBLFFBQVFBLENBQUNBO1FBRW5GQSxhQUFhQSxDQUFDQSx1QkFBdUJBLENBQUNBLGVBQWVBLENBQUNBLENBQUNBO1FBRXZEQSxBQUNBQSxVQURVQTtRQUNWQSxJQUFJQSxJQUFJQSxNQUFNQSxHQUFHQSxVQUFVQSxHQUFHQSxRQUFRQSxHQUFHQSxVQUFVQSxHQUFHQSxRQUFRQSxDQUFDQTtRQUUvREEsTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0E7SUFDYkEsQ0FBQ0E7SUFDRlgsbUNBQUNBO0FBQURBLENBN1FBLEFBNlFDQSxFQTdRMEMsZ0JBQWdCLEVBNlExRDtBQUVELEFBQXNDLGlCQUE3Qiw0QkFBNEIsQ0FBQyIsImZpbGUiOiJtZXRob2RzL0VmZmVjdFJlZnJhY3Rpb25FbnZNYXBNZXRob2QuanMiLCJzb3VyY2VSb290IjoiLi4vIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEN1YmVUZXh0dXJlQmFzZVx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtY29yZS9saWIvdGV4dHVyZXMvQ3ViZVRleHR1cmVCYXNlXCIpO1xyXG5cclxuaW1wb3J0IFN0YWdlXHRcdFx0XHRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtc3RhZ2VnbC9saWIvYmFzZS9TdGFnZVwiKTtcclxuXHJcbmltcG9ydCBTaGFkZXJPYmplY3RCYXNlXHRcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9jb21waWxhdGlvbi9TaGFkZXJPYmplY3RCYXNlXCIpO1xyXG5pbXBvcnQgU2hhZGVyUmVnaXN0ZXJDYWNoZVx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLXJlbmRlcmVyZ2wvbGliL2NvbXBpbGF0aW9uL1NoYWRlclJlZ2lzdGVyQ2FjaGVcIik7XHJcbmltcG9ydCBTaGFkZXJSZWdpc3RlckRhdGFcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1yZW5kZXJlcmdsL2xpYi9jb21waWxhdGlvbi9TaGFkZXJSZWdpc3RlckRhdGFcIik7XHJcbmltcG9ydCBTaGFkZXJSZWdpc3RlckVsZW1lbnRcdFx0XHQ9IHJlcXVpcmUoXCJhd2F5anMtcmVuZGVyZXJnbC9saWIvY29tcGlsYXRpb24vU2hhZGVyUmVnaXN0ZXJFbGVtZW50XCIpO1xyXG5pbXBvcnQgU2hhZGVyQ29tcGlsZXJIZWxwZXJcdFx0XHRcdD0gcmVxdWlyZShcImF3YXlqcy1yZW5kZXJlcmdsL2xpYi91dGlscy9TaGFkZXJDb21waWxlckhlbHBlclwiKTtcclxuXHJcbmltcG9ydCBNZXRob2RWT1x0XHRcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLW1ldGhvZG1hdGVyaWFscy9saWIvZGF0YS9NZXRob2RWT1wiKTtcclxuaW1wb3J0IEVmZmVjdE1ldGhvZEJhc2VcdFx0XHRcdFx0PSByZXF1aXJlKFwiYXdheWpzLW1ldGhvZG1hdGVyaWFscy9saWIvbWV0aG9kcy9FZmZlY3RNZXRob2RCYXNlXCIpO1xyXG5cclxuLyoqXHJcbiAqIEVmZmVjdFJlZnJhY3Rpb25FbnZNYXBNZXRob2QgcHJvdmlkZXMgYSBtZXRob2QgdG8gYWRkIHJlZnJhY3RlZCB0cmFuc3BhcmVuY3kgYmFzZWQgb24gY3ViZSBtYXBzLlxyXG4gKi9cclxuY2xhc3MgRWZmZWN0UmVmcmFjdGlvbkVudk1hcE1ldGhvZCBleHRlbmRzIEVmZmVjdE1ldGhvZEJhc2Vcclxue1xyXG5cdHByaXZhdGUgX2Vudk1hcDpDdWJlVGV4dHVyZUJhc2U7XHJcblxyXG5cdHByaXZhdGUgX2Rpc3BlcnNpb25SOm51bWJlciA9IDA7XHJcblx0cHJpdmF0ZSBfZGlzcGVyc2lvbkc6bnVtYmVyID0gMDtcclxuXHRwcml2YXRlIF9kaXNwZXJzaW9uQjpudW1iZXIgPSAwO1xyXG5cdHByaXZhdGUgX3VzZURpc3BlcnNpb246Ym9vbGVhbjtcclxuXHRwcml2YXRlIF9yZWZyYWN0aW9uSW5kZXg6bnVtYmVyO1xyXG5cdHByaXZhdGUgX2FscGhhOm51bWJlciA9IDE7XHJcblxyXG5cdC8qKlxyXG5cdCAqIENyZWF0ZXMgYSBuZXcgRWZmZWN0UmVmcmFjdGlvbkVudk1hcE1ldGhvZCBvYmplY3QuIEV4YW1wbGUgdmFsdWVzIGZvciBkaXNwZXJzaW9uIGFyZTogZGlzcGVyc2lvblI6IC0wLjAzLCBkaXNwZXJzaW9uRzogLTAuMDEsIGRpc3BlcnNpb25COiA9IC4wMDE1XHJcblx0ICpcclxuXHQgKiBAcGFyYW0gZW52TWFwIFRoZSBlbnZpcm9ubWVudCBtYXAgY29udGFpbmluZyB0aGUgcmVmcmFjdGVkIHNjZW5lLlxyXG5cdCAqIEBwYXJhbSByZWZyYWN0aW9uSW5kZXggVGhlIHJlZnJhY3RpdmUgaW5kZXggb2YgdGhlIG1hdGVyaWFsLlxyXG5cdCAqIEBwYXJhbSBkaXNwZXJzaW9uUiBUaGUgYW1vdW50IG9mIGNocm9tYXRpYyBkaXNwZXJzaW9uIG9mIHRoZSByZWQgY2hhbm5lbC4gRGVmYXVsdHMgdG8gMCAobm9uZSkuXHJcblx0ICogQHBhcmFtIGRpc3BlcnNpb25HIFRoZSBhbW91bnQgb2YgY2hyb21hdGljIGRpc3BlcnNpb24gb2YgdGhlIGdyZWVuIGNoYW5uZWwuIERlZmF1bHRzIHRvIDAgKG5vbmUpLlxyXG5cdCAqIEBwYXJhbSBkaXNwZXJzaW9uQiBUaGUgYW1vdW50IG9mIGNocm9tYXRpYyBkaXNwZXJzaW9uIG9mIHRoZSBibHVlIGNoYW5uZWwuIERlZmF1bHRzIHRvIDAgKG5vbmUpLlxyXG5cdCAqL1xyXG5cdGNvbnN0cnVjdG9yKGVudk1hcDpDdWJlVGV4dHVyZUJhc2UsIHJlZnJhY3Rpb25JbmRleDpudW1iZXIgPSAuMSwgZGlzcGVyc2lvblI6bnVtYmVyID0gMCwgZGlzcGVyc2lvbkc6bnVtYmVyID0gMCwgZGlzcGVyc2lvbkI6bnVtYmVyID0gMClcclxuXHR7XHJcblx0XHRzdXBlcigpO1xyXG5cdFx0dGhpcy5fZW52TWFwID0gZW52TWFwO1xyXG5cdFx0dGhpcy5fZGlzcGVyc2lvblIgPSBkaXNwZXJzaW9uUjtcclxuXHRcdHRoaXMuX2Rpc3BlcnNpb25HID0gZGlzcGVyc2lvbkc7XHJcblx0XHR0aGlzLl9kaXNwZXJzaW9uQiA9IGRpc3BlcnNpb25CO1xyXG5cdFx0dGhpcy5fdXNlRGlzcGVyc2lvbiA9ICEodGhpcy5fZGlzcGVyc2lvblIgPT0gdGhpcy5fZGlzcGVyc2lvbkIgJiYgdGhpcy5fZGlzcGVyc2lvblIgPT0gdGhpcy5fZGlzcGVyc2lvbkcpO1xyXG5cdFx0dGhpcy5fcmVmcmFjdGlvbkluZGV4ID0gcmVmcmFjdGlvbkluZGV4O1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQGluaGVyaXREb2NcclxuXHQgKi9cclxuXHRwdWJsaWMgaUluaXRDb25zdGFudHMoc2hhZGVyT2JqZWN0OlNoYWRlck9iamVjdEJhc2UsIG1ldGhvZFZPOk1ldGhvZFZPKVxyXG5cdHtcclxuXHRcdHZhciBpbmRleDpudW1iZXIgLyppbnQqLyA9IG1ldGhvZFZPLmZyYWdtZW50Q29uc3RhbnRzSW5kZXg7XHJcblx0XHR2YXIgZGF0YTpBcnJheTxudW1iZXI+ID0gc2hhZGVyT2JqZWN0LmZyYWdtZW50Q29uc3RhbnREYXRhO1xyXG5cdFx0ZGF0YVtpbmRleCArIDRdID0gMTtcclxuXHRcdGRhdGFbaW5kZXggKyA1XSA9IDA7XHJcblx0XHRkYXRhW2luZGV4ICsgN10gPSAxO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQGluaGVyaXREb2NcclxuXHQgKi9cclxuXHRwdWJsaWMgaUluaXRWTyhzaGFkZXJPYmplY3Q6U2hhZGVyT2JqZWN0QmFzZSwgbWV0aG9kVk86TWV0aG9kVk8pXHJcblx0e1xyXG5cdFx0bWV0aG9kVk8ubmVlZHNOb3JtYWxzID0gdHJ1ZTtcclxuXHRcdG1ldGhvZFZPLm5lZWRzVmlldyA9IHRydWU7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBUaGUgY3ViZSBlbnZpcm9ubWVudCBtYXAgdG8gdXNlIGZvciB0aGUgcmVmcmFjdGlvbi5cclxuXHQgKi9cclxuXHRwdWJsaWMgZ2V0IGVudk1hcCgpOkN1YmVUZXh0dXJlQmFzZVxyXG5cdHtcclxuXHRcdHJldHVybiB0aGlzLl9lbnZNYXA7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc2V0IGVudk1hcCh2YWx1ZTpDdWJlVGV4dHVyZUJhc2UpXHJcblx0e1xyXG5cdFx0dGhpcy5fZW52TWFwID0gdmFsdWU7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBUaGUgcmVmcmFjdGl2ZSBpbmRleCBvZiB0aGUgbWF0ZXJpYWwuXHJcblx0ICovXHJcblx0cHVibGljIGdldCByZWZyYWN0aW9uSW5kZXgoKTpudW1iZXJcclxuXHR7XHJcblx0XHRyZXR1cm4gdGhpcy5fcmVmcmFjdGlvbkluZGV4O1xyXG5cdH1cclxuXHJcblx0cHVibGljIHNldCByZWZyYWN0aW9uSW5kZXgodmFsdWU6bnVtYmVyKVxyXG5cdHtcclxuXHRcdHRoaXMuX3JlZnJhY3Rpb25JbmRleCA9IHZhbHVlO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogVGhlIGFtb3VudCBvZiBjaHJvbWF0aWMgZGlzcGVyc2lvbiBvZiB0aGUgcmVkIGNoYW5uZWwuIERlZmF1bHRzIHRvIDAgKG5vbmUpLlxyXG5cdCAqL1xyXG5cdHB1YmxpYyBnZXQgZGlzcGVyc2lvblIoKTpudW1iZXJcclxuXHR7XHJcblx0XHRyZXR1cm4gdGhpcy5fZGlzcGVyc2lvblI7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgc2V0IGRpc3BlcnNpb25SKHZhbHVlOm51bWJlcilcclxuXHR7XHJcblx0XHR0aGlzLl9kaXNwZXJzaW9uUiA9IHZhbHVlO1xyXG5cclxuXHRcdHZhciB1c2VEaXNwZXJzaW9uOmJvb2xlYW4gPSAhKHRoaXMuX2Rpc3BlcnNpb25SID09IHRoaXMuX2Rpc3BlcnNpb25CICYmIHRoaXMuX2Rpc3BlcnNpb25SID09IHRoaXMuX2Rpc3BlcnNpb25HKTtcclxuXHRcdGlmICh0aGlzLl91c2VEaXNwZXJzaW9uICE9IHVzZURpc3BlcnNpb24pIHtcclxuXHRcdFx0dGhpcy5pSW52YWxpZGF0ZVNoYWRlclByb2dyYW0oKTtcclxuXHRcdFx0dGhpcy5fdXNlRGlzcGVyc2lvbiA9IHVzZURpc3BlcnNpb247XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBUaGUgYW1vdW50IG9mIGNocm9tYXRpYyBkaXNwZXJzaW9uIG9mIHRoZSBncmVlbiBjaGFubmVsLiBEZWZhdWx0cyB0byAwIChub25lKS5cclxuXHQgKi9cclxuXHRwdWJsaWMgZ2V0IGRpc3BlcnNpb25HKCk6bnVtYmVyXHJcblx0e1xyXG5cdFx0cmV0dXJuIHRoaXMuX2Rpc3BlcnNpb25HO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHNldCBkaXNwZXJzaW9uRyh2YWx1ZTpudW1iZXIpXHJcblx0e1xyXG5cdFx0dGhpcy5fZGlzcGVyc2lvbkcgPSB2YWx1ZTtcclxuXHJcblx0XHR2YXIgdXNlRGlzcGVyc2lvbjpib29sZWFuID0gISh0aGlzLl9kaXNwZXJzaW9uUiA9PSB0aGlzLl9kaXNwZXJzaW9uQiAmJiB0aGlzLl9kaXNwZXJzaW9uUiA9PSB0aGlzLl9kaXNwZXJzaW9uRyk7XHJcblx0XHRpZiAodGhpcy5fdXNlRGlzcGVyc2lvbiAhPSB1c2VEaXNwZXJzaW9uKSB7XHJcblx0XHRcdHRoaXMuaUludmFsaWRhdGVTaGFkZXJQcm9ncmFtKCk7XHJcblx0XHRcdHRoaXMuX3VzZURpc3BlcnNpb24gPSB1c2VEaXNwZXJzaW9uO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogVGhlIGFtb3VudCBvZiBjaHJvbWF0aWMgZGlzcGVyc2lvbiBvZiB0aGUgYmx1ZSBjaGFubmVsLiBEZWZhdWx0cyB0byAwIChub25lKS5cclxuXHQgKi9cclxuXHRwdWJsaWMgZ2V0IGRpc3BlcnNpb25CKCk6bnVtYmVyXHJcblx0e1xyXG5cdFx0cmV0dXJuIHRoaXMuX2Rpc3BlcnNpb25CO1xyXG5cdH1cclxuXHJcblx0cHVibGljIHNldCBkaXNwZXJzaW9uQih2YWx1ZTpudW1iZXIpXHJcblx0e1xyXG5cdFx0dGhpcy5fZGlzcGVyc2lvbkIgPSB2YWx1ZTtcclxuXHJcblx0XHR2YXIgdXNlRGlzcGVyc2lvbjpib29sZWFuID0gISh0aGlzLl9kaXNwZXJzaW9uUiA9PSB0aGlzLl9kaXNwZXJzaW9uQiAmJiB0aGlzLl9kaXNwZXJzaW9uUiA9PSB0aGlzLl9kaXNwZXJzaW9uRyk7XHJcblx0XHRpZiAodGhpcy5fdXNlRGlzcGVyc2lvbiAhPSB1c2VEaXNwZXJzaW9uKSB7XHJcblx0XHRcdHRoaXMuaUludmFsaWRhdGVTaGFkZXJQcm9ncmFtKCk7XHJcblx0XHRcdHRoaXMuX3VzZURpc3BlcnNpb24gPSB1c2VEaXNwZXJzaW9uO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogVGhlIGFtb3VudCBvZiB0cmFuc3BhcmVuY3kgb2YgdGhlIG9iamVjdC4gV2FybmluZzogdGhlIGFscGhhIGFwcGxpZXMgdG8gdGhlIHJlZnJhY3RlZCBjb2xvciwgbm90IHRoZSBhY3R1YWxcclxuXHQgKiBtYXRlcmlhbC4gQSB2YWx1ZSBvZiAxIHdpbGwgbWFrZSBpdCBhcHBlYXIgZnVsbHkgdHJhbnNwYXJlbnQuXHJcblx0ICovXHJcblx0cHVibGljIGdldCBhbHBoYSgpOm51bWJlclxyXG5cdHtcclxuXHRcdHJldHVybiB0aGlzLl9hbHBoYTtcclxuXHR9XHJcblxyXG5cdHB1YmxpYyBzZXQgYWxwaGEodmFsdWU6bnVtYmVyKVxyXG5cdHtcclxuXHRcdHRoaXMuX2FscGhhID0gdmFsdWU7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBAaW5oZXJpdERvY1xyXG5cdCAqL1xyXG5cdHB1YmxpYyBpQWN0aXZhdGUoc2hhZGVyT2JqZWN0OlNoYWRlck9iamVjdEJhc2UsIG1ldGhvZFZPOk1ldGhvZFZPLCBzdGFnZTpTdGFnZSlcclxuXHR7XHJcblx0XHR2YXIgaW5kZXg6bnVtYmVyIC8qaW50Ki8gPSBtZXRob2RWTy5mcmFnbWVudENvbnN0YW50c0luZGV4O1xyXG5cdFx0dmFyIGRhdGE6QXJyYXk8bnVtYmVyPiA9IHNoYWRlck9iamVjdC5mcmFnbWVudENvbnN0YW50RGF0YTtcclxuXHJcblx0XHRkYXRhW2luZGV4XSA9IHRoaXMuX2Rpc3BlcnNpb25SICsgdGhpcy5fcmVmcmFjdGlvbkluZGV4O1xyXG5cclxuXHRcdGlmICh0aGlzLl91c2VEaXNwZXJzaW9uKSB7XHJcblx0XHRcdGRhdGFbaW5kZXggKyAxXSA9IHRoaXMuX2Rpc3BlcnNpb25HICsgdGhpcy5fcmVmcmFjdGlvbkluZGV4O1xyXG5cdFx0XHRkYXRhW2luZGV4ICsgMl0gPSB0aGlzLl9kaXNwZXJzaW9uQiArIHRoaXMuX3JlZnJhY3Rpb25JbmRleDtcclxuXHRcdH1cclxuXHRcdGRhdGFbaW5kZXggKyAzXSA9IHRoaXMuX2FscGhhO1xyXG5cclxuXHRcdHN0YWdlLmFjdGl2YXRlQ3ViZVRleHR1cmUobWV0aG9kVk8udGV4dHVyZXNJbmRleCwgdGhpcy5fZW52TWFwLCBzaGFkZXJPYmplY3QudXNlU21vb3RoVGV4dHVyZXMsIHNoYWRlck9iamVjdC51c2VNaXBtYXBwaW5nKTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEBpbmhlcml0RG9jXHJcblx0ICovXHJcblx0cHVibGljIGlHZXRGcmFnbWVudENvZGUoc2hhZGVyT2JqZWN0OlNoYWRlck9iamVjdEJhc2UsIG1ldGhvZFZPOk1ldGhvZFZPLCB0YXJnZXRSZWc6U2hhZGVyUmVnaXN0ZXJFbGVtZW50LCByZWdpc3RlckNhY2hlOlNoYWRlclJlZ2lzdGVyQ2FjaGUsIHNoYXJlZFJlZ2lzdGVyczpTaGFkZXJSZWdpc3RlckRhdGEpOnN0cmluZ1xyXG5cdHtcclxuXHRcdC8vIHRvZG86IGRhdGEyLnggY291bGQgdXNlIGNvbW1vbiByZWcsIHNvIG9ubHkgMSByZWcgaXMgdXNlZFxyXG5cdFx0dmFyIGRhdGE6U2hhZGVyUmVnaXN0ZXJFbGVtZW50ID0gcmVnaXN0ZXJDYWNoZS5nZXRGcmVlRnJhZ21lbnRDb25zdGFudCgpO1xyXG5cdFx0dmFyIGRhdGEyOlNoYWRlclJlZ2lzdGVyRWxlbWVudCA9IHJlZ2lzdGVyQ2FjaGUuZ2V0RnJlZUZyYWdtZW50Q29uc3RhbnQoKTtcclxuXHRcdHZhciBjb2RlOnN0cmluZyA9IFwiXCI7XHJcblx0XHR2YXIgY3ViZU1hcFJlZzpTaGFkZXJSZWdpc3RlckVsZW1lbnQgPSByZWdpc3RlckNhY2hlLmdldEZyZWVUZXh0dXJlUmVnKCk7XHJcblx0XHR2YXIgcmVmcmFjdGlvbkRpcjpTaGFkZXJSZWdpc3RlckVsZW1lbnQ7XHJcblx0XHR2YXIgcmVmcmFjdGlvbkNvbG9yOlNoYWRlclJlZ2lzdGVyRWxlbWVudDtcclxuXHRcdHZhciB0ZW1wOlNoYWRlclJlZ2lzdGVyRWxlbWVudDtcclxuXHJcblx0XHRtZXRob2RWTy50ZXh0dXJlc0luZGV4ID0gY3ViZU1hcFJlZy5pbmRleDtcclxuXHRcdG1ldGhvZFZPLmZyYWdtZW50Q29uc3RhbnRzSW5kZXggPSBkYXRhLmluZGV4KjQ7XHJcblxyXG5cdFx0cmVmcmFjdGlvbkRpciA9IHJlZ2lzdGVyQ2FjaGUuZ2V0RnJlZUZyYWdtZW50VmVjdG9yVGVtcCgpO1xyXG5cdFx0cmVnaXN0ZXJDYWNoZS5hZGRGcmFnbWVudFRlbXBVc2FnZXMocmVmcmFjdGlvbkRpciwgMSk7XHJcblx0XHRyZWZyYWN0aW9uQ29sb3IgPSByZWdpc3RlckNhY2hlLmdldEZyZWVGcmFnbWVudFZlY3RvclRlbXAoKTtcclxuXHRcdHJlZ2lzdGVyQ2FjaGUuYWRkRnJhZ21lbnRUZW1wVXNhZ2VzKHJlZnJhY3Rpb25Db2xvciwgMSk7XHJcblxyXG5cdFx0dGVtcCA9IHJlZ2lzdGVyQ2FjaGUuZ2V0RnJlZUZyYWdtZW50VmVjdG9yVGVtcCgpO1xyXG5cclxuXHRcdHZhciB2aWV3RGlyUmVnOlNoYWRlclJlZ2lzdGVyRWxlbWVudCA9IHNoYXJlZFJlZ2lzdGVycy52aWV3RGlyRnJhZ21lbnQ7XHJcblx0XHR2YXIgbm9ybWFsUmVnOlNoYWRlclJlZ2lzdGVyRWxlbWVudCA9IHNoYXJlZFJlZ2lzdGVycy5ub3JtYWxGcmFnbWVudDtcclxuXHJcblx0XHRjb2RlICs9IFwibmVnIFwiICsgdmlld0RpclJlZyArIFwiLnh5eiwgXCIgKyB2aWV3RGlyUmVnICsgXCIueHl6XFxuXCI7XHJcblxyXG5cdFx0Y29kZSArPSBcImRwMyBcIiArIHRlbXAgKyBcIi54LCBcIiArIHZpZXdEaXJSZWcgKyBcIi54eXosIFwiICsgbm9ybWFsUmVnICsgXCIueHl6XFxuXCIgK1xyXG5cdFx0XHRcIm11bCBcIiArIHRlbXAgKyBcIi53LCBcIiArIHRlbXAgKyBcIi54LCBcIiArIHRlbXAgKyBcIi54XFxuXCIgK1xyXG5cdFx0XHRcInN1YiBcIiArIHRlbXAgKyBcIi53LCBcIiArIGRhdGEyICsgXCIueCwgXCIgKyB0ZW1wICsgXCIud1xcblwiICtcclxuXHRcdFx0XCJtdWwgXCIgKyB0ZW1wICsgXCIudywgXCIgKyBkYXRhICsgXCIueCwgXCIgKyB0ZW1wICsgXCIud1xcblwiICtcclxuXHRcdFx0XCJtdWwgXCIgKyB0ZW1wICsgXCIudywgXCIgKyBkYXRhICsgXCIueCwgXCIgKyB0ZW1wICsgXCIud1xcblwiICtcclxuXHRcdFx0XCJzdWIgXCIgKyB0ZW1wICsgXCIudywgXCIgKyBkYXRhMiArIFwiLngsIFwiICsgdGVtcCArIFwiLndcXG5cIiArXHJcblx0XHRcdFwic3F0IFwiICsgdGVtcCArIFwiLnksIFwiICsgdGVtcCArIFwiLndcXG5cIiArXHJcblxyXG5cdFx0XHRcIm11bCBcIiArIHRlbXAgKyBcIi54LCBcIiArIGRhdGEgKyBcIi54LCBcIiArIHRlbXAgKyBcIi54XFxuXCIgK1xyXG5cdFx0XHRcImFkZCBcIiArIHRlbXAgKyBcIi54LCBcIiArIHRlbXAgKyBcIi54LCBcIiArIHRlbXAgKyBcIi55XFxuXCIgK1xyXG5cdFx0XHRcIm11bCBcIiArIHRlbXAgKyBcIi54eXosIFwiICsgdGVtcCArIFwiLngsIFwiICsgbm9ybWFsUmVnICsgXCIueHl6XFxuXCIgK1xyXG5cclxuXHRcdFx0XCJtdWwgXCIgKyByZWZyYWN0aW9uRGlyICsgXCIsIFwiICsgZGF0YSArIFwiLngsIFwiICsgdmlld0RpclJlZyArIFwiXFxuXCIgK1xyXG5cdFx0XHRcInN1YiBcIiArIHJlZnJhY3Rpb25EaXIgKyBcIi54eXosIFwiICsgcmVmcmFjdGlvbkRpciArIFwiLnh5eiwgXCIgKyB0ZW1wICsgXCIueHl6XFxuXCIgK1xyXG5cdFx0XHRcIm5ybSBcIiArIHJlZnJhY3Rpb25EaXIgKyBcIi54eXosIFwiICsgcmVmcmFjdGlvbkRpciArIFwiLnh5elxcblwiO1xyXG5cdFx0Y29kZSArPSBTaGFkZXJDb21waWxlckhlbHBlci5nZXRUZXhDdWJlU2FtcGxlQ29kZShyZWZyYWN0aW9uQ29sb3IsIGN1YmVNYXBSZWcsIHRoaXMuX2Vudk1hcCwgc2hhZGVyT2JqZWN0LnVzZVNtb290aFRleHR1cmVzLCBzaGFkZXJPYmplY3QudXNlTWlwbWFwcGluZywgcmVmcmFjdGlvbkRpcikgK1xyXG5cdFx0XHRcInN1YiBcIiArIHJlZnJhY3Rpb25Db2xvciArIFwiLncsIFwiICsgcmVmcmFjdGlvbkNvbG9yICsgXCIudywgZmMwLnhcdFxcblwiICtcclxuXHRcdFx0XCJraWwgXCIgKyByZWZyYWN0aW9uQ29sb3IgKyBcIi53XFxuXCI7XHJcblxyXG5cdFx0aWYgKHRoaXMuX3VzZURpc3BlcnNpb24pIHtcclxuXHRcdFx0Ly8gR1JFRU5cclxuXHRcdFx0Y29kZSArPSBcImRwMyBcIiArIHRlbXAgKyBcIi54LCBcIiArIHZpZXdEaXJSZWcgKyBcIi54eXosIFwiICsgbm9ybWFsUmVnICsgXCIueHl6XFxuXCIgK1xyXG5cdFx0XHRcdFwibXVsIFwiICsgdGVtcCArIFwiLncsIFwiICsgdGVtcCArIFwiLngsIFwiICsgdGVtcCArIFwiLnhcXG5cIiArXHJcblx0XHRcdFx0XCJzdWIgXCIgKyB0ZW1wICsgXCIudywgXCIgKyBkYXRhMiArIFwiLngsIFwiICsgdGVtcCArIFwiLndcXG5cIiArXHJcblx0XHRcdFx0XCJtdWwgXCIgKyB0ZW1wICsgXCIudywgXCIgKyBkYXRhICsgXCIueSwgXCIgKyB0ZW1wICsgXCIud1xcblwiICtcclxuXHRcdFx0XHRcIm11bCBcIiArIHRlbXAgKyBcIi53LCBcIiArIGRhdGEgKyBcIi55LCBcIiArIHRlbXAgKyBcIi53XFxuXCIgK1xyXG5cdFx0XHRcdFwic3ViIFwiICsgdGVtcCArIFwiLncsIFwiICsgZGF0YTIgKyBcIi54LCBcIiArIHRlbXAgKyBcIi53XFxuXCIgK1xyXG5cdFx0XHRcdFwic3F0IFwiICsgdGVtcCArIFwiLnksIFwiICsgdGVtcCArIFwiLndcXG5cIiArXHJcblxyXG5cdFx0XHRcdFwibXVsIFwiICsgdGVtcCArIFwiLngsIFwiICsgZGF0YSArIFwiLnksIFwiICsgdGVtcCArIFwiLnhcXG5cIiArXHJcblx0XHRcdFx0XCJhZGQgXCIgKyB0ZW1wICsgXCIueCwgXCIgKyB0ZW1wICsgXCIueCwgXCIgKyB0ZW1wICsgXCIueVxcblwiICtcclxuXHRcdFx0XHRcIm11bCBcIiArIHRlbXAgKyBcIi54eXosIFwiICsgdGVtcCArIFwiLngsIFwiICsgbm9ybWFsUmVnICsgXCIueHl6XFxuXCIgK1xyXG5cclxuXHRcdFx0XHRcIm11bCBcIiArIHJlZnJhY3Rpb25EaXIgKyBcIiwgXCIgKyBkYXRhICsgXCIueSwgXCIgKyB2aWV3RGlyUmVnICsgXCJcXG5cIiArXHJcblx0XHRcdFx0XCJzdWIgXCIgKyByZWZyYWN0aW9uRGlyICsgXCIueHl6LCBcIiArIHJlZnJhY3Rpb25EaXIgKyBcIi54eXosIFwiICsgdGVtcCArIFwiLnh5elxcblwiICtcclxuXHRcdFx0XHRcIm5ybSBcIiArIHJlZnJhY3Rpb25EaXIgKyBcIi54eXosIFwiICsgcmVmcmFjdGlvbkRpciArIFwiLnh5elxcblwiO1xyXG5cdFx0XHRjb2RlICs9IFNoYWRlckNvbXBpbGVySGVscGVyLmdldFRleEN1YmVTYW1wbGVDb2RlKHRlbXAsIGN1YmVNYXBSZWcsIHRoaXMuX2Vudk1hcCwgc2hhZGVyT2JqZWN0LnVzZVNtb290aFRleHR1cmVzLCBzaGFkZXJPYmplY3QudXNlTWlwbWFwcGluZywgcmVmcmFjdGlvbkRpcikgK1xyXG5cdFx0XHRcdFwibW92IFwiICsgcmVmcmFjdGlvbkNvbG9yICsgXCIueSwgXCIgKyB0ZW1wICsgXCIueVxcblwiO1xyXG5cclxuXHRcdFx0Ly8gQkxVRVxyXG5cdFx0XHRjb2RlICs9IFwiZHAzIFwiICsgdGVtcCArIFwiLngsIFwiICsgdmlld0RpclJlZyArIFwiLnh5eiwgXCIgKyBub3JtYWxSZWcgKyBcIi54eXpcXG5cIiArXHJcblx0XHRcdFx0XCJtdWwgXCIgKyB0ZW1wICsgXCIudywgXCIgKyB0ZW1wICsgXCIueCwgXCIgKyB0ZW1wICsgXCIueFxcblwiICtcclxuXHRcdFx0XHRcInN1YiBcIiArIHRlbXAgKyBcIi53LCBcIiArIGRhdGEyICsgXCIueCwgXCIgKyB0ZW1wICsgXCIud1xcblwiICtcclxuXHRcdFx0XHRcIm11bCBcIiArIHRlbXAgKyBcIi53LCBcIiArIGRhdGEgKyBcIi56LCBcIiArIHRlbXAgKyBcIi53XFxuXCIgK1xyXG5cdFx0XHRcdFwibXVsIFwiICsgdGVtcCArIFwiLncsIFwiICsgZGF0YSArIFwiLnosIFwiICsgdGVtcCArIFwiLndcXG5cIiArXHJcblx0XHRcdFx0XCJzdWIgXCIgKyB0ZW1wICsgXCIudywgXCIgKyBkYXRhMiArIFwiLngsIFwiICsgdGVtcCArIFwiLndcXG5cIiArXHJcblx0XHRcdFx0XCJzcXQgXCIgKyB0ZW1wICsgXCIueSwgXCIgKyB0ZW1wICsgXCIud1xcblwiICtcclxuXHJcblx0XHRcdFx0XCJtdWwgXCIgKyB0ZW1wICsgXCIueCwgXCIgKyBkYXRhICsgXCIueiwgXCIgKyB0ZW1wICsgXCIueFxcblwiICtcclxuXHRcdFx0XHRcImFkZCBcIiArIHRlbXAgKyBcIi54LCBcIiArIHRlbXAgKyBcIi54LCBcIiArIHRlbXAgKyBcIi55XFxuXCIgK1xyXG5cdFx0XHRcdFwibXVsIFwiICsgdGVtcCArIFwiLnh5eiwgXCIgKyB0ZW1wICsgXCIueCwgXCIgKyBub3JtYWxSZWcgKyBcIi54eXpcXG5cIiArXHJcblxyXG5cdFx0XHRcdFwibXVsIFwiICsgcmVmcmFjdGlvbkRpciArIFwiLCBcIiArIGRhdGEgKyBcIi56LCBcIiArIHZpZXdEaXJSZWcgKyBcIlxcblwiICtcclxuXHRcdFx0XHRcInN1YiBcIiArIHJlZnJhY3Rpb25EaXIgKyBcIi54eXosIFwiICsgcmVmcmFjdGlvbkRpciArIFwiLnh5eiwgXCIgKyB0ZW1wICsgXCIueHl6XFxuXCIgK1xyXG5cdFx0XHRcdFwibnJtIFwiICsgcmVmcmFjdGlvbkRpciArIFwiLnh5eiwgXCIgKyByZWZyYWN0aW9uRGlyICsgXCIueHl6XFxuXCI7XHJcblx0XHRcdGNvZGUgKz0gU2hhZGVyQ29tcGlsZXJIZWxwZXIuZ2V0VGV4Q3ViZVNhbXBsZUNvZGUodGVtcCwgY3ViZU1hcFJlZywgdGhpcy5fZW52TWFwLCBzaGFkZXJPYmplY3QudXNlU21vb3RoVGV4dHVyZXMsIHNoYWRlck9iamVjdC51c2VNaXBtYXBwaW5nLCByZWZyYWN0aW9uRGlyKSArXHJcblx0XHRcdFx0XCJtb3YgXCIgKyByZWZyYWN0aW9uQ29sb3IgKyBcIi56LCBcIiArIHRlbXAgKyBcIi56XFxuXCI7XHJcblx0XHR9XHJcblxyXG5cdFx0cmVnaXN0ZXJDYWNoZS5yZW1vdmVGcmFnbWVudFRlbXBVc2FnZShyZWZyYWN0aW9uRGlyKTtcclxuXHJcblx0XHRjb2RlICs9IFwic3ViIFwiICsgcmVmcmFjdGlvbkNvbG9yICsgXCIueHl6LCBcIiArIHJlZnJhY3Rpb25Db2xvciArIFwiLnh5eiwgXCIgKyB0YXJnZXRSZWcgKyBcIi54eXpcXG5cIiArXHJcblx0XHRcdFwibXVsIFwiICsgcmVmcmFjdGlvbkNvbG9yICsgXCIueHl6LCBcIiArIHJlZnJhY3Rpb25Db2xvciArIFwiLnh5eiwgXCIgKyBkYXRhICsgXCIud1xcblwiICtcclxuXHRcdFx0XCJhZGQgXCIgKyB0YXJnZXRSZWcgKyBcIi54eXosIFwiICsgdGFyZ2V0UmVnICsgXCIueHl6LCBcIiArIHJlZnJhY3Rpb25Db2xvciArIFwiLnh5elxcblwiO1xyXG5cclxuXHRcdHJlZ2lzdGVyQ2FjaGUucmVtb3ZlRnJhZ21lbnRUZW1wVXNhZ2UocmVmcmFjdGlvbkNvbG9yKTtcclxuXHJcblx0XHQvLyByZXN0b3JlXHJcblx0XHRjb2RlICs9IFwibmVnIFwiICsgdmlld0RpclJlZyArIFwiLnh5eiwgXCIgKyB2aWV3RGlyUmVnICsgXCIueHl6XFxuXCI7XHJcblxyXG5cdFx0cmV0dXJuIGNvZGU7XHJcblx0fVxyXG59XHJcblxyXG5leHBvcnQgPSBFZmZlY3RSZWZyYWN0aW9uRW52TWFwTWV0aG9kOyJdfQ==